require.config({"config": {
        "jsbuild":{"Magento_Sales/order/create/scripts.min.js":"define(['jquery','Magento_Ui/js/modal/confirm','Magento_Ui/js/modal/alert','mage/template','text!Magento_Sales/templates/order/create/shipping/reload.html','text!Magento_Sales/templates/order/create/payment/reload.html','mage/translate','prototype','Magento_Catalog/catalog/product/composite/configure','Magento_Ui/js/lib/view/utils/async'],function(jQuery,confirm,alert,template,shippingTemplate,paymentTemplate){window.AdminOrder=new Class.create();AdminOrder.prototype={initialize:function(data){if(!data)data={};this.loadBaseUrl=false;this.customerId=data.customer_id?data.customer_id:false;this.storeId=data.store_id?data.store_id:false;this.quoteId=data['quote_id']?data['quote_id']:false;this.currencyId=false;this.currencySymbol=data.currency_symbol?data.currency_symbol:'';this.addresses=data.addresses?data.addresses:$H({});this.shippingAsBilling=data.shippingAsBilling?data.shippingAsBilling:false;this.gridProducts=$H({});this.gridProductsGift=$H({});this.billingAddressContainer='';this.shippingAddressContainer='';this.isShippingMethodReseted=data.shipping_method_reseted?data.shipping_method_reseted:false;this.overlayData=$H({});this.giftMessageDataChanged=false;this.productConfigureAddFields={};this.productPriceBase={};this.collectElementsValue=true;this.isOnlyVirtualProduct=false;this.excludedPaymentMethods=[];this.summarizePrice=true;this.selectAddressEvent=false;this.shippingTemplate=template(shippingTemplate,{data:{title:jQuery.mage.__('Shipping Method'),linkText:jQuery.mage.__('Get shipping methods and rates')}});this.paymentTemplate=template(paymentTemplate,{data:{title:jQuery.mage.__('Payment Method'),linkText:jQuery.mage.__('Get available payment methods')}});jQuery.async('#order-items',(function(){this.dataArea=new OrderFormArea('data',$(this.getAreaId('data')),this);this.itemsArea=Object.extend(new OrderFormArea('items',$(this.getAreaId('items')),this),{addControlButton:function(button){var controlButtonArea=$(this.node).select('.actions')[0];if(typeof controlButtonArea!='undefined'){var buttons=controlButtonArea.childElements();for(var i=0;i<buttons.length;i++){if(buttons[i].innerHTML.include(button.getLabel())){return;}}\nbutton.insertIn(controlButtonArea,'top');}}});var searchButtonId='add_products',searchButton=new ControlButton(jQuery.mage.__('Add Products'),searchButtonId),searchAreaId=this.getAreaId('search');searchButton.onClick=function(){$(searchAreaId).show();var el=this;window.setTimeout(function(){el.remove();},10);};jQuery.async('#order-items .admin__page-section-title',(function(){this.dataArea.onLoad=this.dataArea.onLoad.wrap(function(proceed){proceed();this._parent.itemsArea.setNode($(this._parent.getAreaId('items')));this._parent.itemsArea.onLoad();});this.itemsArea.onLoad=this.itemsArea.onLoad.wrap(function(proceed){proceed();if($(searchAreaId)&&!jQuery('#'+searchAreaId).is(':visible')&&!$(searchButtonId)){this.addControlButton(searchButton);}});this.areasLoaded();this.itemsArea.onLoad();}).bind(this));}).bind(this));jQuery('#edit_form').on('submitOrder',function(){jQuery(this).trigger('realOrder');}).on('realOrder',this._realSubmit.bind(this));},areasLoaded:function(){},itemsLoaded:function(){},dataLoaded:function(){this.dataShow();},setLoadBaseUrl:function(url){this.loadBaseUrl=url;},setAddresses:function(addresses){this.addresses=addresses;},addExcludedPaymentMethod:function(method){this.excludedPaymentMethods.push(method);},setCustomerId:function(id){this.customerId=id;this.loadArea('header',true);$(this.getAreaId('header')).callback='setCustomerAfter';$('back_order_top_button').hide();$('reset_order_top_button').show();},setCustomerAfter:function(){this.customerSelectorHide();if(this.storeId){$(this.getAreaId('data')).callback='dataLoaded';this.loadArea(['data'],true);}else{this.storeSelectorShow();}},setStoreId:function(id){this.storeId=id;this.storeSelectorHide();this.sidebarShow();this.dataShow();this.loadArea(['header','data'],true);location.reload();},setCurrencyId:function(id){this.currencyId=id;this.loadArea(['data'],true);},setCurrencySymbol:function(symbol){this.currencySymbol=symbol;},selectAddress:function(el,container){var id=el.value;if(id.length==0){id='0';}\nthis.selectAddressEvent=true;if(this.addresses[id]){this.fillAddressFields(container,this.addresses[id]);}else{this.fillAddressFields(container,{});}\nthis.selectAddressEvent=false;var data=this.serializeData(container);data[el.name]=id;this.resetPaymentMethod();if(this.isShippingField(container)&&!this.isShippingMethodReseted){this.resetShippingMethod(data);}else{this.saveData(data);}},isShippingField:function(fieldId){if(this.shippingAsBilling){return fieldId.include('billing');}\nreturn fieldId.include('shipping');},isBillingField:function(fieldId){return fieldId.include('billing');},bindAddressFields:function(container){var fields=$(container).select('input','select','textarea'),i;for(i=0;i<fields.length;i++){jQuery(fields[i]).change(this.changeAddressField.bind(this));}},changeAddressField:function(event){var field=Event.element(event),re=/[^\\[]*\\[([^\\]]*)_address\\]\\[([^\\]]*)\\](\\[(\\d)\\])?/,matchRes=field.name.match(re),type,name,data,resetShipping=false;if(!matchRes){return;}\ntype=matchRes[1];name=matchRes[2];if(this.isBillingField(field.id)){data=this.serializeData(this.billingAddressContainer);}else{data=this.serializeData(this.shippingAddressContainer);}\ndata=data.toObject();if(type==='billing'&&this.shippingAsBilling){this.syncAddressField(this.shippingAddressContainer,field.name,field);resetShipping=true;}\nif(type==='shipping'&&!this.shippingAsBilling){resetShipping=true;}\nif(resetShipping){data['reset_shipping']=true;}\nif(name!=='customer_address_id'&&this.selectAddressEvent===false){if(this.shippingAsBilling){$('order-shipping_address_customer_address_id').value='';}\n$('order-'+type+'_address_customer_address_id').value='';}\ndata['order['+type+'_address][customer_address_id]']=null;data['shipping_as_billing']=+this.shippingAsBilling;if(name==='customer_address_id'){data['order['+type+'_address][customer_address_id]']=$('order-'+type+'_address_customer_address_id').value;}\nif(name==='country_id'&&this.selectAddressEvent===false){$('order-'+type+'_address_customer_address_id').value='';}\nthis.resetPaymentMethod();if(data['reset_shipping']){this.resetShippingMethod();}else{this.saveData(data);if(name==='country_id'||name==='customer_address_id'){this.loadArea(['shipping_method','billing_method','totals','items'],true,data);}}},syncAddressField:function(container,fieldName,fieldValue){var syncName;if(this.isBillingField(fieldName)){syncName=fieldName.replace('billing','shipping');}\n$(container).select('[name=\"'+syncName+'\"]').each(function(element){if(~['input','textarea','select'].indexOf(element.tagName.toLowerCase())){if(element.type===\"checkbox\"){element.checked=fieldValue.checked;}else{element.value=fieldValue.value;}}});},fillAddressFields:function(container,data){var regionIdElem=false;var regionIdElemValue=false;var fields=$(container).select('input','select','textarea');var re=/[^\\[]*\\[[^\\]]*\\]\\[([^\\]]*)\\](\\[(\\d)\\])?/;for(var i=0;i<fields.length;i++){if(fields[i].tagName.toLowerCase()=='input'&&fields[i].type.toLowerCase()=='file'){continue;}\nvar matchRes=fields[i].name.match(re);if(matchRes===null){continue;}\nvar name=matchRes[1];var index=matchRes[3];if(index){if(data[name]){var values=data[name].split(\"\\n\");fields[i].value=values[index]?values[index]:'';}else{fields[i].value='';}}else if(fields[i].tagName.toLowerCase()=='select'&&fields[i].multiple){if(data[name]){values=[''];if(Object.isString(data[name])){values=data[name].split(',');}else if(Object.isArray(data[name])){values=data[name];}\nfields[i].setValue(values);}}else{fields[i].setValue(data[name]?data[name]:'');}\nif(fields[i].changeUpdater){fields[i].changeUpdater();}\nif(name=='region'&&data['region_id']&&!data['region']){fields[i].value=data['region_id'];}\njQuery(fields[i]).trigger('change');}},disableShippingAddress:function(flag){this.shippingAsBilling=flag;if($('order-shipping_address_customer_address_id')){$('order-shipping_address_customer_address_id').disabled=flag;}\nif($(this.shippingAddressContainer)){var dataFields=$(this.shippingAddressContainer).select('input','select','textarea');for(var i=0;i<dataFields.length;i++){dataFields[i].disabled=flag;if(this.isOnlyVirtualProduct){dataFields[i].setValue('');}}\nvar buttons=$(this.shippingAddressContainer).select('button');for(i=0;i<buttons.length;i++){buttons[i].disabled=flag;if(flag){buttons[i].addClassName('disabled');}else{buttons[i].removeClassName('disabled');}}}},setShippingAsBilling:function(flag){var data,areasToLoad=['billing_method','shipping_address','shipping_method','totals','giftmessage'];this.disableShippingAddress(flag);data=this.serializeData(flag?this.billingAddressContainer:this.shippingAddressContainer);data=data.toObject();data['shipping_as_billing']=flag?1:0;data['reset_shipping']=1;data['order[shipping_address][customer_address_id]']=null;this.loadArea(areasToLoad,true,data);},resetShippingMethod:function(){if(!this.isOnlyVirtualProduct){$(this.getAreaId('shipping_method')).update(this.shippingTemplate);}},resetPaymentMethod:function(){$(this.getAreaId('billing_method')).update(this.paymentTemplate);},loadShippingRates:function(){var addressContainer=this.shippingAsBilling?'billingAddressContainer':'shippingAddressContainer',data=this.serializeData(this[addressContainer]).toObject();data['collect_shipping_rates']=1;this.isShippingMethodReseted=false;this.loadArea(['shipping_method','totals'],true,data);return false;},setShippingMethod:function(method){var data={};data['order[shipping_method]']=method;this.loadArea(['shipping_method','totals','billing_method'],true,data);},loadPaymentMethods:function(){var data=this.serializeData(this.billingAddressContainer).toObject();this.loadArea(['billing_method','totals'],true,data);return false;},switchPaymentMethod:function(method){if(this.paymentMethod!==method){jQuery('#edit_form').off('submitOrder').on('submitOrder',function(){jQuery(this).trigger('realOrder');});}\njQuery('#edit_form').trigger('changePaymentMethod',[method]);this.setPaymentMethod(method);var data={};data['order[payment_method]']=method;this.loadArea(['card_validation'],true,data);},setPaymentMethod:function(method){if(this.paymentMethod&&$('payment_form_'+this.paymentMethod)){var form='payment_form_'+this.paymentMethod;[form+'_before',form,form+'_after'].each(function(el){var block=$(el);if(block){block.hide();block.select('input','select','textarea').each(function(field){field.disabled=true;});}});}\nif(!this.paymentMethod||method){$('order-billing_method_form').select('input','select','textarea').each(function(elem){if(elem.type!='radio')elem.disabled=true;})}\nif($('payment_form_'+method)){jQuery('#'+this.getAreaId('billing_method')).trigger('contentUpdated');this.paymentMethod=method;var form='payment_form_'+method;[form+'_before',form,form+'_after'].each(function(el){var block=$(el);if(block){block.show();block.select('input','select','textarea').each(function(field){field.disabled=false;if(!el.include('_before')&&!el.include('_after')&&!field.bindChange){field.bindChange=true;field.paymentContainer=form;field.method=method;field.observe('change',this.changePaymentData.bind(this))}},this);}},this);}},changePaymentData:function(event){var elem=Event.element(event);if(elem&&elem.method){var data=this.getPaymentData(elem.method);if(data){this.loadArea(['card_validation'],true,data);}else{return;}}},getPaymentData:function(currentMethod){if(typeof(currentMethod)=='undefined'){if(this.paymentMethod){currentMethod=this.paymentMethod;}else{return false;}}\nif(this.isPaymentValidationAvailable()==false){return false;}\nvar data={};var fields=$('payment_form_'+currentMethod).select('input','select');for(var i=0;i<fields.length;i++){data[fields[i].name]=fields[i].getValue();}\nif((typeof data['payment[cc_type]'])!='undefined'&&(!data['payment[cc_type]']||!data['payment[cc_number]'])){return false;}\nreturn data;},applyCoupon:function(code){this.loadArea(['items','shipping_method','totals','billing_method'],true,{'order[coupon][code]':code,reset_shipping:true});this.orderItemChanged=false;jQuery('html, body').animate({scrollTop:0});},addProduct:function(id){this.loadArea(['items','shipping_method','totals','billing_method'],true,{add_product:id,reset_shipping:true});},removeQuoteItem:function(id){this.loadArea(['items','shipping_method','totals','billing_method'],true,{remove_item:id,from:'quote',reset_shipping:true});},moveQuoteItem:function(id,to){this.loadArea(['sidebar_'+to,'items','shipping_method','totals','billing_method'],this.getAreaId('items'),{move_item:id,to:to,reset_shipping:true});},productGridShow:function(buttonElement){this.productGridShowButton=buttonElement;Element.hide(buttonElement);this.showArea('search');},productGridRowInit:function(grid,row){var checkbox=$(row).select('.checkbox')[0];var inputs=$(row).select('.input-text');if(checkbox&&inputs.length>0){checkbox.inputElements=inputs;for(var i=0;i<inputs.length;i++){var input=inputs[i];input.checkboxElement=checkbox;var product=this.gridProducts.get(checkbox.value);if(product){var defaultValue=product[input.name];if(defaultValue){if(input.name=='giftmessage'){input.checked=true;}else{input.value=defaultValue;}}}\ninput.disabled=!checkbox.checked||input.hasClassName('input-inactive');Event.observe(input,'keyup',this.productGridRowInputChange.bind(this));Event.observe(input,'change',this.productGridRowInputChange.bind(this));}}},productGridRowInputChange:function(event){var element=Event.element(event);if(element&&element.checkboxElement&&element.checkboxElement.checked){if(element.name!='giftmessage'||element.checked){this.gridProducts.get(element.checkboxElement.value)[element.name]=element.value;}else if(element.name=='giftmessage'&&this.gridProducts.get(element.checkboxElement.value)[element.name]){delete(this.gridProducts.get(element.checkboxElement.value)[element.name]);}}},productGridRowClick:function(grid,event){var trElement=Event.findElement(event,'tr');var qtyElement=trElement.select('input[name=\"qty\"]')[0];var eventElement=Event.element(event);if(eventElement.tagName==='LABEL'&&trElement.querySelector('#'+eventElement.htmlFor)&&trElement.querySelector('#'+eventElement.htmlFor).type==='checkbox'){event.stopPropagation();trElement.querySelector('#'+eventElement.htmlFor).trigger('click');return;}\nvar isInputCheckbox=(eventElement.tagName==='INPUT'&&eventElement.type==='checkbox');var isInputQty=grid.targetElement&&grid.targetElement.tagName==='INPUT'&&grid.targetElement.name==='qty';if(trElement&&!isInputQty){var checkbox=Element.select(trElement,'input[type=\"checkbox\"]')[0];var confLink=Element.select(trElement,'a')[0];var priceColl=Element.select(trElement,'.price')[0];if(checkbox){if(confLink.readAttribute('disabled')){var checked=isInputCheckbox?checkbox.checked:!checkbox.checked;grid.setCheckboxChecked(checkbox,checked);}else if(isInputCheckbox&&!checkbox.checked){grid.setCheckboxChecked(checkbox,false);}else if(!isInputCheckbox||(isInputCheckbox&&checkbox.checked)){var listType=confLink.readAttribute('list_type');var productId=confLink.readAttribute('product_id');if(typeof this.productPriceBase[productId]=='undefined'){var priceBase=priceColl.innerHTML.match(/.*?([\\d,]+\\.?\\d*)/);if(!priceBase){this.productPriceBase[productId]=0;}else{this.productPriceBase[productId]=parseFloat(priceBase[1].replace(/,/g,''));}}\nproductConfigure.setConfirmCallback(listType,function(){var confirmedCurrentQty=productConfigure.getCurrentConfirmedQtyElement();if(qtyElement&&confirmedCurrentQty&&!isNaN(confirmedCurrentQty.value)){qtyElement.value=confirmedCurrentQty.value;}\nvar productPrice=this._calcProductPrice();if(this._isSummarizePrice()){productPrice+=this.productPriceBase[productId];}\nproductPrice=parseFloat(Math.round(productPrice+\"e+2\")+\"e-2\");priceColl.innerHTML=this.currencySymbol+productPrice.toFixed(2);grid.setCheckboxChecked(checkbox,true);}.bind(this));productConfigure.setCancelCallback(listType,function(){if(!$(productConfigure.confirmedCurrentId)||!$(productConfigure.confirmedCurrentId).innerHTML){grid.setCheckboxChecked(checkbox,false);}});productConfigure.setShowWindowCallback(listType,function(){var formCurrentQty=productConfigure.getCurrentFormQtyElement();if(formCurrentQty&&qtyElement&&!isNaN(qtyElement.value)){formCurrentQty.value=qtyElement.value;}}.bind(this));productConfigure.showItemConfiguration(listType,productId);}}}},_isSummarizePrice:function(elm){if(elm&&elm.hasAttribute('summarizePrice')){this.summarizePrice=parseInt(elm.readAttribute('summarizePrice'));}\nreturn this.summarizePrice;},_calcProductPrice:function(){var productPrice=0;var getPriceFields=function(elms){var productPrice=0;var getPrice=function(elm){var optQty=1;if(elm.hasAttribute('qtyId')){if(!$(elm.getAttribute('qtyId')).value){return 0;}else{optQty=parseFloat($(elm.getAttribute('qtyId')).value);}}\nif(elm.hasAttribute('price')&&!elm.disabled){return parseFloat(elm.readAttribute('price'))*optQty;}\nreturn 0;};for(var i=0;i<elms.length;i++){if(elms[i].type=='select-one'||elms[i].type=='select-multiple'){for(var ii=0;ii<elms[i].options.length;ii++){if(elms[i].options[ii].selected){if(this._isSummarizePrice(elms[i].options[ii])){productPrice+=getPrice(elms[i].options[ii]);}else{productPrice=getPrice(elms[i].options[ii]);}}}}else if(((elms[i].type=='checkbox'||elms[i].type=='radio')&&elms[i].checked)||((elms[i].type=='file'||elms[i].type=='text'||elms[i].type=='textarea'||elms[i].type=='hidden')&&Form.Element.getValue(elms[i]))){if(this._isSummarizePrice(elms[i])){productPrice+=getPrice(elms[i]);}else{productPrice=getPrice(elms[i]);}}}\nreturn productPrice;}.bind(this);productPrice+=getPriceFields($(productConfigure.confirmedCurrentId).getElementsByTagName('input'));productPrice+=getPriceFields($(productConfigure.confirmedCurrentId).getElementsByTagName('select'));productPrice+=getPriceFields($(productConfigure.confirmedCurrentId).getElementsByTagName('textarea'));return productPrice;},productGridCheckboxCheck:function(grid,element,checked){if(checked){if(element.inputElements){this.gridProducts.set(element.value,{});var product=this.gridProducts.get(element.value);for(var i=0;i<element.inputElements.length;i++){var input=element.inputElements[i];if(!input.hasClassName('input-inactive')){input.disabled=false;if(input.name=='qty'&&!input.value){input.value=1;}}\nif(input.checked||input.name!='giftmessage'){product[input.name]=input.value;}else if(product[input.name]){delete(product[input.name]);}}}}else{if(element.inputElements){for(var i=0;i<element.inputElements.length;i++){element.inputElements[i].disabled=true;}}\nthis.gridProducts.unset(element.value);}\ngrid.reloadParams={'products[]':this.gridProducts.keys()};},productGridFilterKeyPress:function(grid,event){var returnKey=parseInt(Event.KEY_RETURN||13,10);if(event.keyCode===returnKey){if(typeof event.stopPropagation==='function'){event.stopPropagation();}\nif(typeof event.preventDefault==='function'){event.preventDefault();}}},productGridAddSelected:function(){if(this.productGridShowButton)Element.show(this.productGridShowButton);var area=['search','items','shipping_method','totals','giftmessage','billing_method'];var fieldsPrepare={};var itemsFilter=[];var products=this.gridProducts.toObject();for(var productId in products){itemsFilter.push(productId);var paramKey='item['+productId+']';for(var productParamKey in products[productId]){paramKey+='['+productParamKey+']';fieldsPrepare[paramKey]=products[productId][productParamKey];}}\nthis.productConfigureSubmit('product_to_add',area,fieldsPrepare,itemsFilter);productConfigure.clean('quote_items');this.hideArea('search');this.gridProducts=$H({});},selectCustomer:function(grid,event){var element=Event.findElement(event,'tr');if(element.title){this.setCustomerId(element.title);}},customerSelectorHide:function(){this.hideArea('customer-selector');},customerSelectorShow:function(){this.showArea('customer-selector');},storeSelectorHide:function(){this.hideArea('store-selector');},storeSelectorShow:function(){this.showArea('store-selector');},dataHide:function(){this.hideArea('data');},dataShow:function(){if($('submit_order_top_button')){$('submit_order_top_button').show();}\nthis.showArea('data');},clearShoppingCart:function(confirmMessage){var self=this;confirm({content:confirmMessage,actions:{confirm:function(){self.collectElementsValue=false;order.sidebarApplyChanges({'sidebar[empty_customer_cart]':1});self.collectElementsValue=true;}}});},sidebarApplyChanges:function(auxiliaryParams){if($(this.getAreaId('sidebar'))){var data={};if(this.collectElementsValue){var elems=$(this.getAreaId('sidebar')).select('input');for(var i=0;i<elems.length;i++){if(elems[i].getValue()){data[elems[i].name]=elems[i].getValue();}}}\nif(auxiliaryParams instanceof Object){for(var paramName in auxiliaryParams){data[paramName]=String(auxiliaryParams[paramName]);}}\ndata.reset_shipping=true;this.loadArea(['sidebar','items','shipping_method','billing_method','totals','giftmessage'],true,data);}},sidebarHide:function(){if(this.storeId===false&&$('page:left')&&$('page:container')){$('page:left').hide();$('page:container').removeClassName('container');$('page:container').addClassName('container-collapsed');}},sidebarShow:function(){if($('page:left')&&$('page:container')){$('page:left').show();$('page:container').removeClassName('container-collapsed');$('page:container').addClassName('container');}},sidebarConfigureProduct:function(listType,productId,itemId){var params={},isWishlist=!!itemId;params.reset_shipping=true;params.add_product=productId;this.prepareParams(params);for(var i in params){if(params[i]===null){unset(params[i]);}else if(typeof(params[i])=='boolean'){params[i]=params[i]?1:0;}}\nvar fields=[];for(var name in params){fields.push(new Element('input',{type:'hidden',name:name,value:params[name]}));}\nproductConfigure.setBeforeSubmitCallback(listType,function(){productConfigure.addFields(fields);}.bind(this));productConfigure.setOnLoadIFrameCallback(listType,function(response){var areas=['items','shipping_method','billing_method','totals','giftmessage'];if(!response.ok){return;}\nif(isWishlist){this.removeSidebarItem(itemId,'wishlist').done(function(){this.loadArea(areas,true);}.bind(this));}else{this.loadArea(areas,true);}}.bind(this));itemId=itemId?itemId:productId;productConfigure.showItemConfiguration(listType,itemId);return false;},removeSidebarItem:function(id,from){return this.loadArea(['sidebar_'+from],'sidebar_data_'+from,{remove_item:id,from:from});},itemsUpdate:function(){var area=['sidebar','items','shipping_method','billing_method','totals','giftmessage'];var fieldsPrepare={update_items:1};var info=$('order-items_grid').select('input','select','textarea');for(var i=0;i<info.length;i++){if(!info[i].disabled&&(info[i].type!='checkbox'||info[i].checked)){fieldsPrepare[info[i].name]=info[i].getValue();}}\nfieldsPrepare=Object.extend(fieldsPrepare,this.productConfigureAddFields);this.productConfigureSubmit('quote_items',area,fieldsPrepare);this.orderItemChanged=false;},itemsOnchangeBind:function(){var elems=$('order-items_grid').select('input','select','textarea');for(var i=0;i<elems.length;i++){if(!elems[i].bindOnchange){elems[i].bindOnchange=true;elems[i].observe('change',this.itemChange.bind(this))}}},itemChange:function(event){this.giftmessageOnItemChange(event);this.orderItemChanged=true;},productConfigureSubmit:function(listType,area,fieldsPrepare,itemsFilter){area=this.prepareArea(area);this.loadingAreas=area;var url=this.loadBaseUrl+'block/'+area+'?isAjax=true';fieldsPrepare=this.prepareParams(fieldsPrepare);fieldsPrepare.reset_shipping=1;fieldsPrepare.json=1;var fields=[];for(var name in fieldsPrepare){fields.push(new Element('input',{type:'hidden',name:name,value:fieldsPrepare[name]}));}\nproductConfigure.addFields(fields);if(itemsFilter){productConfigure.addItemsFilter(listType,itemsFilter);}\nproductConfigure.addListType(listType,{urlSubmit:url});productConfigure.setOnLoadIFrameCallback(listType,function(response){this.loadAreaResponseHandler(response);}.bind(this));productConfigure.submit(listType);this.productConfigureAddFields={};},showQuoteItemConfiguration:function(itemId){var listType='quote_items';var qtyElement=$('order-items_grid').select('input[name=\"item\\['+itemId+'\\]\\[qty\\]\"]')[0];productConfigure.setConfirmCallback(listType,function(){var confirmedCurrentQty=productConfigure.getCurrentConfirmedQtyElement();if(qtyElement&&confirmedCurrentQty&&!isNaN(confirmedCurrentQty.value)){qtyElement.value=confirmedCurrentQty.value;}\nthis.productConfigureAddFields['item['+itemId+'][configured]']=1;this.itemsUpdate();}.bind(this));productConfigure.setShowWindowCallback(listType,function(){var formCurrentQty=productConfigure.getCurrentFormQtyElement();if(formCurrentQty&&qtyElement&&!isNaN(qtyElement.value)){formCurrentQty.value=qtyElement.value;}}.bind(this));productConfigure.showItemConfiguration(listType,itemId);},accountFieldsBind:function(container){if($(container)){var fields=$(container).select('input','select','textarea');for(var i=0;i<fields.length;i++){if(fields[i].id=='group_id'){fields[i].observe('change',this.accountGroupChange.bind(this))}else{fields[i].observe('change',this.accountFieldChange.bind(this))}}}},accountGroupChange:function(){this.loadArea(['data'],true,this.serializeData('order-form_account').toObject());},accountFieldChange:function(){this.saveData(this.serializeData('order-form_account'));},commentFieldsBind:function(container){if($(container)){var fields=$(container).select('input','textarea');for(var i=0;i<fields.length;i++)\nfields[i].observe('change',this.commentFieldChange.bind(this))}},commentFieldChange:function(){this.saveData(this.serializeData('order-comment'));},giftmessageFieldsBind:function(container){if($(container)){var fields=$(container).select('input','textarea');for(var i=0;i<fields.length;i++)\nfields[i].observe('change',this.giftmessageFieldChange.bind(this))}},giftmessageFieldChange:function(){this.giftMessageDataChanged=true;},giftmessageOnItemChange:function(event){var element=Event.element(event);if(element.name.indexOf(\"giftmessage\")!=-1&&element.type==\"checkbox\"&&!element.checked){var messages=$(\"order-giftmessage\").select('textarea');var name;for(var i=0;i<messages.length;i++){name=messages[i].id.split(\"_\");if(name.length<2)continue;if(element.name.indexOf(\"[\"+name[1]+\"]\")!=-1&&messages[i].value!=\"\"){alert({content:\"First, clean the Message field in Gift Message form\"});element.checked=true;}}}},loadArea:function(area,indicator,params){var deferred=new jQuery.Deferred();var url=this.loadBaseUrl;if(area){area=this.prepareArea(area);url+='block/'+area;}\nif(indicator===true)indicator='html-body';params=this.prepareParams(params);params.json=true;if(!this.loadingAreas)this.loadingAreas=[];if(indicator){this.loadingAreas=area;new Ajax.Request(url,{parameters:params,loaderArea:indicator,onSuccess:function(transport){var response=transport.responseText.evalJSON();this.loadAreaResponseHandler(response);deferred.resolve();}.bind(this)});}else{new Ajax.Request(url,{parameters:params,loaderArea:indicator,onSuccess:function(transport){deferred.resolve();}});}\nif(typeof productConfigure!='undefined'&&area instanceof Array&&area.indexOf('items')!=-1){productConfigure.clean('quote_items');}\nreturn deferred.promise();},loadAreaResponseHandler:function(response){if(response.error){alert({content:response.message});}\nif(response.ajaxExpired&&response.ajaxRedirect){setLocation(response.ajaxRedirect);}\nif(!this.loadingAreas){this.loadingAreas=[];}\nif(typeof this.loadingAreas=='string'){this.loadingAreas=[this.loadingAreas];}\nif(this.loadingAreas.indexOf('message')==-1){this.loadingAreas.push('message');}\nif(response.header){jQuery('.page-actions-inner').attr('data-title',response.header);}\nfor(var i=0;i<this.loadingAreas.length;i++){var id=this.loadingAreas[i];if($(this.getAreaId(id))){if((id in response)&&id!=='message'||response[id]){$(this.getAreaId(id)).update(response[id]);}\nif($(this.getAreaId(id)).callback){this[$(this.getAreaId(id)).callback]();}}}},prepareArea:function(area){if(this.giftMessageDataChanged){return area.without('giftmessage');}\nreturn area;},saveData:function(data){this.loadArea(false,false,data);},showArea:function(area){var id=this.getAreaId(area);if($(id)){$(id).show();this.areaOverlay();}},hideArea:function(area){var id=this.getAreaId(area);if($(id)){$(id).hide();this.areaOverlay();}},areaOverlay:function(){$H(order.overlayData).each(function(e){e.value.fx();});},getAreaId:function(area){return'order-'+area;},prepareParams:function(params){if(!params){params={};}\nif(!params.customer_id){params.customer_id=this.customerId;}\nif(!params.store_id){params.store_id=this.storeId;}\nif(!params.currency_id){params.currency_id=this.currencyId;}\nif(!params.form_key){params.form_key=FORM_KEY;}\nif(this.isPaymentValidationAvailable()){var data=this.serializeData('order-billing_method');if(data){data.each(function(value){params[value[0]]=value[1];});}}else{params['payment[method]']=this.paymentMethod;}\nreturn params;},isPaymentValidationAvailable:function(){return((typeof this.paymentMethod)=='undefined'||this.excludedPaymentMethods.indexOf(this.paymentMethod)==-1);},serializeData:function(container){var fields=$(container).select('input','select','textarea'),data=Form.serializeElements(fields,true);return $H(data);},toggleCustomPrice:function(checkbox,elemId,tierBlock){if(checkbox.checked){$(elemId).disabled=false;$(elemId).show();if($(tierBlock))$(tierBlock).hide();}else{$(elemId).disabled=true;$(elemId).hide();if($(tierBlock))$(tierBlock).show();}},submit:function(){var $editForm=jQuery('#edit_form'),beforeSubmitOrderEvent;if($editForm.valid()){$editForm.trigger('processStart');beforeSubmitOrderEvent=jQuery.Event('beforeSubmitOrder');$editForm.trigger(beforeSubmitOrderEvent);if(beforeSubmitOrderEvent.result!==false){$editForm.trigger('submitOrder');}}},_realSubmit:function(){var disableAndSave=function(){disableElements('save');jQuery('#edit_form').on('invalid-form.validate',function(){enableElements('save');jQuery('#edit_form').trigger('processStop');jQuery('#edit_form').off('invalid-form.validate');});jQuery('#edit_form').triggerHandler('save');}\nif(this.orderItemChanged){var self=this;jQuery('#edit_form').trigger('processStop');confirm({content:jQuery.mage.__('You have item changes'),actions:{confirm:function(){jQuery('#edit_form').trigger('processStart');disableAndSave();},cancel:function(){self.itemsUpdate();}}});}else{disableAndSave();}},overlay:function(elId,show,observe){if(typeof(show)=='undefined'){show=true;}\nvar orderObj=this;var obj=this.overlayData.get(elId);if(!obj){obj={show:show,el:elId,order:orderObj,fx:function(event){this.order.processOverlay(this.el,this.show);}};obj.bfx=obj.fx.bindAsEventListener(obj);this.overlayData.set(elId,obj);}else{obj.show=show;Event.stopObserving(window,'resize',obj.bfx);}\nEvent.observe(window,'resize',obj.bfx);this.processOverlay(elId,show);},processOverlay:function(elId,show){var el=$(elId);if(!el){return;}\nvar parentEl=el.up(1);if(show){parentEl.removeClassName('ignore-validate');}else{parentEl.addClassName('ignore-validate');}\nif(Prototype.Browser.IE){parentEl.select('select').each(function(elem){if(show){elem.needShowOnSuccess=false;elem.style.visibility='';}else{elem.style.visibility='hidden';elem.needShowOnSuccess=true;}});}\nparentEl.setStyle({position:'relative'});el.setStyle({display:show?'none':''});},validateVat:function(parameters){var params={country:$(parameters.countryElementId).value,vat:$(parameters.vatElementId).value};if(this.storeId!==false){params.store_id=this.storeId;}\nvar currentCustomerGroupId=$(parameters.groupIdHtmlId)?$(parameters.groupIdHtmlId).value:'';new Ajax.Request(parameters.validateUrl,{parameters:params,onSuccess:function(response){var message='';var groupActionRequired=null;try{response=response.responseText.evalJSON();if(null===response.group){if(true===response.valid){message=parameters.vatValidMessage;}else if(true===response.success){message=parameters.vatInvalidMessage.replace(/%s/,params.vat);}else{message=parameters.vatValidationFailedMessage;}}else{if(true===response.valid){message=parameters.vatValidAndGroupValidMessage;if(0===response.group){message=parameters.vatValidAndGroupInvalidMessage;groupActionRequired='inform';}else if(currentCustomerGroupId!=response.group){message=parameters.vatValidAndGroupChangeMessage;groupActionRequired='change';}}else if(response.success){message=parameters.vatInvalidMessage.replace(/%s/,params.vat);groupActionRequired='inform';}else{message=parameters.vatValidationFailedMessage;groupActionRequired='inform';}}}catch(e){message=parameters.vatValidationFailedMessage;}\nif(null===groupActionRequired){alert({content:message});}else{this.processCustomerGroupChange(parameters.groupIdHtmlId,message,parameters.vatCustomerGroupMessage,parameters.vatGroupErrorMessage,response.group,groupActionRequired);}}.bind(this)});},processCustomerGroupChange:function(groupIdHtmlId,message,customerGroupMessage,errorMessage,groupId,action){var groupMessage='';try{var currentCustomerGroupId=$(groupIdHtmlId).value;var currentCustomerGroupTitle=$$('#'+groupIdHtmlId+' > option[value='+currentCustomerGroupId+']')[0].text;var customerGroupOption=$$('#'+groupIdHtmlId+' > option[value='+groupId+']')[0];groupMessage=customerGroupMessage.replace(/%s/,customerGroupOption.text);}catch(e){groupMessage=errorMessage;if(action==='change'){message='';action='inform';}}\nif(action==='change'){var confirmText=message.replace(/%s/,customerGroupOption.text);confirmText=confirmText.replace(/%s/,currentCustomerGroupTitle);confirm({content:confirmText,actions:{confirm:function(){$$('#'+groupIdHtmlId+' option').each(function(o){o.selected=o.readAttribute('value')==groupId;});this.accountGroupChange();}.bind(this)}})}else if(action==='inform'){alert({content:message+'\\n'+groupMessage});}}};window.OrderFormArea=Class.create();OrderFormArea.prototype={_name:null,_node:null,_parent:null,_callbackName:null,initialize:function(name,node,parent){if(!node)\nreturn;this._name=name;this._parent=parent;this._callbackName=node.callback;if(typeof this._callbackName=='undefined'){this._callbackName=name+'Loaded';node.callback=this._callbackName;}\nparent[this._callbackName]=parent[this._callbackName].wrap((function(proceed){proceed();this.onLoad();}).bind(this));this.setNode(node);},setNode:function(node){if(!node.callback){node.callback=this._callbackName;}\nthis.node=node;},onLoad:function(){}};window.ControlButton=Class.create();ControlButton.prototype={_label:'',_node:null,initialize:function(label,id){this._label=label;this._node=new Element('button',{'class':'action-secondary action-add','type':'button'});if(typeof id!=='undefined'){this._node.setAttribute('id',id)}},onClick:function(){},insertIn:function(element,position){var node=Object.extend(this._node),content={};node.observe('click',this.onClick);node.update('<span>'+this._label+'</span>');content[position]=node;Element.insert(element,content);},getLabel:function(){return this._label;}};});","Magento_Sales/order/edit/message.min.js":"define(['jquery','jquery/ui','Magento_Ui/js/modal/modal','mage/translate'],function($){'use strict';$.widget('mage.orderEditDialog',{options:{url:null,message:null,modal:null},_create:function(){this._prepareDialog();},showDialog:function(){this.options.dialog.html(this.options.message).modal('openModal');},redirect:function(){window.location=this.options.url;},_prepareDialog:function(){var self=this;this.options.dialog=$('<div class=\"ui-dialog-content ui-widget-content\"></div>').modal({type:'popup',modalClass:'edit-order-popup',title:$.mage.__('Edit Order'),buttons:[{text:$.mage.__('Ok'),'class':'action-primary',click:function(){self.redirect();}}]});}});return $.mage.orderEditDialog;});","Magento_Sales/order/edit/address/form.min.js":"define(['jquery'],function($){'use strict';return function(config,element){var form=$(element),regionId=form.find('#region_id'),setRegion=function(){form.find('#region').val(regionId.filter(':visible').find(':selected').text());};if(regionId.is('visible')){setRegion();}\nregionId.on('change',setRegion);form.find('#country_id').on('change',setRegion);};});","Magento_Sales/order/view/post-wrapper.min.js":"define(['jquery','Magento_Ui/js/modal/confirm','mage/translate'],function($,confirm){'use strict';function getForm(url){return $('<form>',{'action':url,'method':'POST'}).append($('<input>',{'name':'form_key','value':window.FORM_KEY,'type':'hidden'}));}\n$(document).on('click','#order-view-cancel-button',function(){var msg=$.mage.__('Are you sure you want to cancel this order?'),url=$('#order-view-cancel-button').data('url');confirm({'content':msg,'actions':{confirm:function(){getForm(url).appendTo('body').trigger('submit');}}});return false;});$(document).on('click','#order-view-hold-button',function(){var url=$('#order-view-hold-button').data('url');getForm(url).appendTo('body').trigger('submit');});$(document).on('click','#order-view-unhold-button',function(){var url=$('#order-view-unhold-button').data('url');getForm(url).appendTo('body').trigger('submit');});});","Magento_Customer/edit/post-wrapper.min.js":"define(['jquery','Magento_Ui/js/modal/confirm','mage/translate'],function($,confirm){'use strict';function getForm(url){return $('<form>',{'action':url,'method':'POST'}).append($('<input>',{'name':'form_key','value':window.FORM_KEY,'type':'hidden'}));}\n$('#customer-edit-delete-button').on('click',function(){var msg=$.mage.__('Are you sure you want to do this?'),url=$('#customer-edit-delete-button').data('url');confirm({'content':msg,'actions':{confirm:function(){getForm(url).appendTo('body').submit();}}});return false;});});","Magento_Customer/js/address/default-address.min.js":"define(['Magento_Ui/js/form/components/button','underscore'],function(Button,_){'use strict';return Button.extend({defaults:{entityId:null,parentId:null,listens:{entity:'changeVisibility'}},applyAction:function(action){if(action.params&&action.params[0]){action.params[0]['entity_id']=this.entityId;action.params[0]['parent_id']=this.parentId;}else{action.params=[{'entity_id':this.entityId,'parent_id':this.parentId}];}\nthis._super();},changeVisibility:function(entity){this.visible(!_.isEmpty(entity));}});});","Magento_Customer/js/bootstrap/customer-post-action.min.js":"require(['Magento_Customer/edit/post-wrapper']);","Magento_Customer/js/form/components/form.min.js":"define(['jquery','Magento_Ui/js/modal/alert','Magento_Ui/js/modal/confirm','Magento_Ui/js/form/form','underscore','mage/translate'],function($,uiAlert,uiConfirm,Form,_,$t){'use strict';return Form.extend({defaults:{deleteConfirmationMessage:'',ajaxSettings:{method:'POST',dataType:'json'}},deleteAddress:function(url){var that=this;uiConfirm({content:this.deleteConfirmationMessage,actions:{confirm:function(){that._delete(url);}}});},_delete:function(url){var settings=_.extend({},this.ajaxSettings,{url:url,data:{'form_key':window.FORM_KEY}}),that=this;$('body').trigger('processStart');return $.ajax(settings).done(function(response){if(response.error){uiAlert({content:response.message});}else{that.trigger('deleteAddressAction',that.source.get('data.entity_id'));}}).fail(function(){uiAlert({content:$t('Sorry, there has been an error processing your request. Please try again later.')});}).always(function(){$('body').trigger('processStop');});}});});","Magento_Customer/js/form/components/insert-form.min.js":"define(['Magento_Ui/js/form/components/insert-form'],function(Insert){'use strict';return Insert.extend({defaults:{listens:{responseData:'onResponse'},modules:{addressListing:'${ $.addressListingProvider }',addressModal:'${ $.addressModalProvider }'}},onResponse:function(responseData){var data;if(!responseData.error){this.addressModal().closeModal();this.addressListing().reload({refresh:true});data=this.externalSource().get('data');this.saveAddress(responseData,data);}},saveAddress:function(responseData,data){data['entity_id']=responseData.data['entity_id'];if(parseFloat(data['default_billing'])){this.source.set('data.default_billing_address',data);}else if(parseFloat(this.source.get('data.default_billing_address')['entity_id'])===data['entity_id']){this.source.set('data.default_billing_address',[]);}\nif(parseFloat(data['default_shipping'])){this.source.set('data.default_shipping_address',data);}else if(parseFloat(this.source.get('data.default_shipping_address')['entity_id'])===data['entity_id']){this.source.set('data.default_shipping_address',[]);}},onAddressDelete:function(id){this.addressModal().closeModal();this.addressListing().reload({refresh:true});this.addressListing()._delete([parseFloat(id)]);}});});","Magento_Customer/js/form/components/insert-listing.min.js":"define(['Magento_Ui/js/form/components/insert-listing','underscore'],function(Insert,_){'use strict';return Insert.extend({onAction:function(data){this[data.action+'Action'].call(this,data.data);},onMassAction:function(data){this[data.action+'Massaction'].call(this,data.data);},setDefaultBillingAction:function(data){this.source.set('data.default_billing_address',data);},setDefaultShippingAction:function(data){this.source.set('data.default_shipping_address',data);},deleteAction:function(data){this._delete([parseFloat(data[data['id_field_name']])]);},deleteMassaction:function(data){var ids=data.selected||this.selections().selected();ids=_.map(ids,function(val){return parseFloat(val);});this._delete(ids);},_delete:function(ids){var defaultShippingId=parseFloat(this.source.get('data.default_shipping_address.entity_id')),defaultBillingId=parseFloat(this.source.get('data.default_billing_address.entity_id'));if(ids.indexOf(defaultShippingId)!==-1){this.source.set('data.default_shipping_address',[]);}\nif(ids.indexOf(defaultBillingId)!==-1){this.source.set('data.default_billing_address',[]);}\n_.each(ids,function(id){this.selections().deselect(id.toString(),false);},this);}});});","Magento_Customer/js/form/element/country.min.js":"define(['Magento_Ui/js/form/element/country'],function(Country){'use strict';return Country.extend({defaults:{countryScope:'data.country'},setDifferedFromDefault:function(value){this._super();if(value){this.source.set(this.countryScope,this.indexedOptions[value].label);}}});});","Magento_Customer/js/form/element/region.min.js":"define(['Magento_Ui/js/form/element/region'],function(Region){'use strict';return Region.extend({defaults:{regionScope:'data.region'},setDifferedFromDefault:function(value){this._super();if(parseFloat(value)){this.source.set(this.regionScope,this.indexedOptions[value].label);}}});});","Magento_Customer/js/form/element/website.min.js":"define(['Magento_Ui/js/form/element/website','uiRegistry','underscore'],function(Website,registry,_){'use strict';return Website.extend({onUpdate:function(value){var groupIdFieldKey='group_id',sendEmailStoreIdFieldKey='sendemail_store_id',groupId=registry.get('index = '+groupIdFieldKey),sendEmailStoreId=registry.get('index = '+sendEmailStoreIdFieldKey),customerAttributes=registry.filter('parentScope = data.customer'),option=this.getOption(value);customerAttributes.forEach(element=>{var requiredWebsites=element.validation['required-entry-website'];if(!_.isArray(requiredWebsites)){return;}\nif(requiredWebsites.includes(parseInt(value,10))){element.validation['required-entry']=true;element.required(true);}else{delete element.validation['required-entry'];element.required(false);}});if(groupId){groupId.value(option[groupIdFieldKey]);}\nif(sendEmailStoreId&&option['default_store_view_id']){sendEmailStoreId.value(option['default_store_view_id']);}\nreturn this._super();}});});","Magento_Customer/js/grid/massactions.min.js":"define(['Magento_Ui/js/grid/massactions','Magento_Ui/js/modal/alert','underscore','jquery','mage/translate'],function(Massactions,uiAlert,_,$,$t){'use strict';return Massactions.extend({defaults:{ajaxSettings:{method:'POST',dataType:'json'},listens:{massaction:'onAction'}},onAction:function(data){if(data.action==='delete'){this.source.reload({refresh:true});}},defaultCallback:function(action,data){var itemsType,selections;if(action.isAjax){itemsType=data.excludeMode?'excluded':'selected';selections={};selections[itemsType]=data[itemsType];if(!selections[itemsType].length){selections[itemsType]=false;}\n_.extend(selections,data.params||{});this.request(action.url,selections).done(function(response){if(!response.error){this.trigger('massaction',{action:action.type,data:selections});}}.bind(this));}else{this._super();}},request:function(href,data){var settings=_.extend({},this.ajaxSettings,{url:href,data:data});$('body').trigger('processStart');return $.ajax(settings).done(function(response){if(response.error){uiAlert({content:response.message});}}).fail(function(){uiAlert({content:$t('Sorry, there has been an error processing your request. Please try again later.')});}).always(function(){$('body').trigger('processStop');});}});});","Magento_Customer/js/grid/columns/actions.min.js":"define(['Magento_Ui/js/grid/columns/actions','Magento_Ui/js/modal/alert','underscore','jquery','mage/translate'],function(Actions,uiAlert,_,$,$t){'use strict';return Actions.extend({defaults:{ajaxSettings:{method:'POST',dataType:'json'},listens:{action:'onAction'},ignoreTmpls:{fieldAction:true,options:true,action:true}},onAction:function(data){if(data.action==='delete'){this.source().reload({refresh:true});}},defaultCallback:function(actionIndex,recordId,action){if(action.isAjax){this.request(action.href).done(function(response){var data;if(!response.error){data=_.findWhere(this.rows,{_rowIndex:action.rowIndex});this.trigger('action',{action:actionIndex,data:data});}}.bind(this));}else{this._super();}},request:function(href){var settings=_.extend({},this.ajaxSettings,{url:href,data:{'form_key':window.FORM_KEY}});$('body').trigger('processStart');return $.ajax(settings).done(function(response){if(response.error){uiAlert({content:response.message});}}).fail(function(){uiAlert({content:$t('Sorry, there has been an error processing your request. Please try again later.')});}).always(function(){$('body').trigger('processStop');});}});});","Magento_Customer/js/grid/filters/chips.min.js":"define(['Magento_Ui/js/grid/filters/chips'],function(Chips){'use strict';return Chips.extend({initElement:function(elem){this.clear();this._super(elem);}});});","Magento_Customer/js/grid/filters/filters.min.js":"define(['Magento_Ui/js/grid/filters/filters'],function(Filters){'use strict';return Filters.extend({defaults:{chipsConfig:{name:'${ $.name }_chips',provider:'${ $.chipsConfig.name }',component:'Magento_Customer/js/grid/filters/chips'}}});});","Magento_Integration/js/integration.min.js":"define(['jquery','Magento_Ui/js/modal/alert','jquery/ui','mage/translate','Magento_Ui/js/modal/modal'],function($,alert){'use strict';$.widget('mage.integration',{options:{gridUrl:''},_create:function(){if($('#save-split-button-activate').length){this._form=$('#edit_form');this._form.on('saveAndActivate',$.proxy(this._saveAndActivate,this));}},_saveAndActivate:function(){if(this._form.validation&&!this._form.validation('isValid')){return false;}\n$.ajax({url:this._form.prop('action'),type:'post',data:this._form.serialize(),dataType:'json',context:this,beforeSend:function(){$('body').trigger('processStart');},success:function(data){var integrationName,that;if(data._redirect){window.location.href=data._redirect;}else if(data.integrationId){integrationName=$('#integration_properties_name').val();window.integration.popup.show($('<span>').attr({'data-row-dialog':'permissions','data-row-id':data.integrationId,'data-row-name':$('<div>').text(integrationName).html(),'data-row-is-reauthorize':'0','data-row-is-token-exchange':data.isTokenExchange}));that=this;$('#integration-popup-container').on('dialogclose',function(){$('body').trigger('processStart');window.location.href=that.options.gridUrl;return false;});}},error:function(jqXHR,status,error){alert({content:$.mage.__('Sorry, something went wrong. Please try again later.')});window.console&&console.log(status+': '+error+'\\nResponse text:\\n'+jqXHR.responseText);},complete:function(){$('body').trigger('processStop');}});return true;}});window.Integration=function(permissionsDialogUrl,tokensDialogUrl,tokensExchangeUrl,gridUrl,successCallbackUrl){var url={permissions:permissionsDialogUrl,tokens:tokensDialogUrl,tokensExchange:tokensExchangeUrl,grid:gridUrl},IdentityLogin={win:null,strLocation:null,checker:null,isCalledBack:false,jqInfoDialog:$('#integration-popup-container'),successCallbackUrl:successCallbackUrl,Constants:{CHECKER_INTERVAL:500,WIDTH:680,HEIGHT:510,LEFT:screen.width-680-30,TOP:screen.height-510-300},invokePopup:function(identityCallbackUrl,consumerKey,jqInfoDialog){var param;IdentityLogin.isCalledBack=false;IdentityLogin.jqInfoDialog=jqInfoDialog;param=$.param({'oauth_consumer_key':consumerKey,'success_call_back':IdentityLogin.successCallbackUrl});IdentityLogin.win=window.open(identityCallbackUrl+'?'+param,'','top='+IdentityLogin.Constants.TOP+', left='+IdentityLogin.Constants.LEFT+', width='+IdentityLogin.Constants.WIDTH+', height='+IdentityLogin.Constants.HEIGHT+',scrollbars=no');if(IdentityLogin.checker!=null){clearInterval(IdentityLogin.checker);}\nIdentityLogin.checker=setInterval(IdentityLogin.fnCheckLocation,IdentityLogin.Constants.CHECKER_INTERVAL);},fnCheckLocation:function(){if(IdentityLogin.win==null){return;}\ntry{if(IdentityLogin.win.closed||IdentityLogin.win.location.href==IdentityLogin.successCallbackUrl){clearInterval(IdentityLogin.checker);$('body').trigger('processStart');window.location.href=url.grid;IdentityLogin.jqInfoDialog.modal('closeModal');}}catch(e){if(IdentityLogin.win.closed){IdentityLogin.jqInfoDialog.modal('closeModal');clearInterval(IdentityLogin.checker);}\nreturn;}}},isPopupBlocked=function(popupWindow){try{popupWindow.focus();}catch(e){alert({content:$.mage.__('Popup Blocker is enabled! Please add this site to your exception list.')});return true;}\nreturn false;},_showPopup=function(dialog,title,okButton,ajaxUrl){$.ajax({url:ajaxUrl,cache:false,data:{'form_key':window.FORM_KEY},method:'GET',beforeSend:function(){$('body').trigger('processStart');},success:function(result){var redirect=result._redirect,identityLinkUrl,consumerKey,popupHtml,popup,resultObj,buttons,dialogProperties;if(redirect){window.location.href=redirect;return;}\nidentityLinkUrl=null;consumerKey=null;popupHtml=null;popup=$('#integration-popup-container');try{resultObj=typeof result==='string'?JSON.parse(result):result;identityLinkUrl=resultObj['identity_link_url'];consumerKey=resultObj['oauth_consumer_key'];popupHtml=resultObj['popup_content'];}catch(e){}\nif(identityLinkUrl&&consumerKey&&popupHtml){IdentityLogin.invokePopup(identityLinkUrl,consumerKey,popup);if(isPopupBlocked(IdentityLogin.win)){return;}}else{popupHtml=result;}\nif(popup.length===0){popup=$('<div></div>');}\npopup.html(popupHtml);buttons=[];dialogProperties={title:title,type:'slide',dialogClass:dialog=='permissions'?'integration-dialog':'integration-dialog no-close'};if(okButton){buttons.push(okButton);}\nif(buttons.length>0){dialogProperties.buttons=buttons;}\npopup.modal(dialogProperties);popup.modal('openModal');},error:function(jqXHR,status,error){alert({content:$.mage.__('Sorry, something went wrong. Please try again later.')});window.console&&console.log(status+': '+error+'\\nResponse text:\\n'+jqXHR.responseText);},complete:function(){$('body').trigger('processStop');}});};return{popup:{show:function(ctx){var dialog=$(ctx).attr('data-row-dialog'),isReauthorize=$(ctx).attr('data-row-is-reauthorize'),isTokenExchange=$(ctx).attr('data-row-is-token-exchange'),integrationId,ajaxUrl,integrationName,okButton;if(!url.hasOwnProperty(dialog)){throw'Invalid dialog type';}\nintegrationId=$(ctx).attr('data-row-id');if(!integrationId){throw'Unable to find integration ID';}\najaxUrl=url[dialog].replace(':id',integrationId).replace(':isReauthorize',isReauthorize);try{integrationName=$(ctx).attr('data-row-name')||$(ctx).parents('tr').find('.col-name').html().trim();if(integrationName.indexOf('<span')>-1){integrationName=integrationName.substring(0,integrationName.indexOf('<span'));}}catch(e){throw'Unable to find integration name';}\nokButton={permissions:{text:isReauthorize=='1'?$.mage.__('Reauthorize'):$.mage.__('Allow'),'class':'action-primary',attr:{'data-row-id':integrationId,'data-row-name':integrationName,'data-row-dialog':isTokenExchange=='1'?'tokensExchange':'tokens','data-row-is-reauthorize':isReauthorize,'data-row-is-token-exchange':isTokenExchange},click:function(){var context=this.modal.find('button.action-primary').clone(true);this.closeModal();this.modal.remove();window.integration.popup.show(context);}},tokens:{text:$.mage.__('Done'),'class':'action-primary',click:function(){window.location.href=url.grid;}}};_showPopup(dialog,integrationName,okButton[dialog],ajaxUrl);}}};};return $.mage.integration;});","Magento_User/js/delete-user-account.min.js":"define(['jquery'],function($){'use strict';var postData;return function(params,elem){elem.on('click',function(){postData={'data':{'user_id':params.objId,'current_password':$('[name=\"current_password\"]').val()}};if($.validator.validateElement($('[name=\"current_password\"]'))){window.deleteConfirm(params.message,params.url,postData);}});};});","Magento_User/js/roles-tree.min.js":"define(['jquery','jquery/ui','jquery/jstree/jquery.jstree'],function($){'use strict';$.widget('mage.rolesTree',{options:{treeInitData:{},editFormSelector:'',resourceFieldName:'resource[]',checkboxVisible:true},_create:function(){this.element.jstree({plugins:['checkbox'],checkbox:{three_state:false,visible:this.options.checkboxVisible,cascade:'undetermined'},core:{data:this.options.treeInitData,themes:{dots:false}}});this._bind();},_destroy:function(){this.element.jstree('destroy');},_bind:function(){this.element.on('select_node.jstree',$.proxy(this._selectChildNodes,this));this.element.on('deselect_node.jstree',$.proxy(this._deselectChildNodes,this));this.element.on('changed.jstree',$.proxy(this._changedNode,this));},_selectChildNodes:function(event,selected){selected.instance.open_node(selected.node);selected.node.children.each(function(id){var selector='[id=\"'+id+'\"]';selected.instance.select_node(selected.instance.get_node($(selector),false));});},_deselectChildNodes:function(event,selected){selected.node.children.each(function(id){var selector='[id=\"'+id+'\"]';selected.instance.deselect_node(selected.instance.get_node($(selector),false));});},_changedNode:function(event,selected){var form=$(this.options.editFormSelector),fieldName=this.options.resourceFieldName,items=selected.selected.concat($(this.element).jstree('get_undetermined'));if(this.options.editFormSelector===''){return;}\nform.find('input[name=\"'+this.options.resourceFieldName+'\"]').remove();items.each(function(id){$('<input>',{type:'hidden',name:fieldName,value:id}).appendTo(form);});}});return $.mage.rolesTree;});","Magento_Cms/js/folder-tree.min.js":"define(['jquery','jquery/ui','jquery/jstree/jquery.jstree'],function($){'use strict';$.widget('mage.folderTree',{options:{root:'root',rootName:'Root',url:'',currentPath:['root'],tree:{core:{themes:{dots:false},check_callback:true}}},_create:function(){var options=this.options,treeOptions=$.extend(true,{},options.tree,{core:{data:{url:options.url,type:'POST',dataType:'text',dataFilter:$.proxy(function(data){return this._convertData(JSON.parse(data));},this),data:function(node){return{node:node.id==='root'?null:node.id,'form_key':window.FORM_KEY};}}}});this.element.jstree(treeOptions).on('ready.jstree',$.proxy(this.treeLoaded,this)).on('load_node.jstree',$.proxy(this._createRootNode,this));},treeLoaded:function(){var path=this.options.currentPath,tree=this.element,lastExistentFolderEl,recursiveOpen=function(){var folderEl=$('[data-id=\"'+path.pop()+'\"]');if(!folderEl.length){tree.jstree('select_node',lastExistentFolderEl);return;}\nlastExistentFolderEl=folderEl;if(path.length){tree.jstree('open_node',folderEl,recursiveOpen);}else{tree.jstree('open_node',folderEl,function(){tree.jstree('select_node',folderEl);});}};recursiveOpen();},_createRootNode:function(event,data){var rootNode,children;if(data.node.id==='#'){rootNode={id:this.options.root,text:this.options.rootName,li_attr:{'data-id':this.options.root}};children=data.node.children;data.instance.element.jstree().create_node(null,rootNode,'first',function(){data.instance.element.jstree().move_node(children,rootNode.id);});}},_convertData:function(data){return $.map(data,function(node){return{id:node.id,text:node.text,path:node.path,li_attr:{'data-id':node.id},children:node.children};});}});return $.mage.folderTree;});","Magento_Email/js/variables.min.js":"define(['jquery','mage/translate','Magento_Ui/js/modal/modal','jquery/ui','prototype'],function(jQuery,$t){'use strict';window.Variables={textareaElementId:null,variablesContent:null,dialogWindow:null,dialogWindowId:'variables-chooser',overlayShowEffectOptions:null,overlayHideEffectOptions:null,insertFunction:'Variables.insertVariable',variablesValue:[],init:function(textareaElementId,insertFunction){if($(textareaElementId)){this.textareaElementId=textareaElementId;}\nif(insertFunction){this.insertFunction=insertFunction;}},resetData:function(){this.variablesContent=null;this.dialogWindow=null;},openVariableChooser:function(variables){if(this.variablesContent==null&&variables){this.variablesContent='<ul class=\"insert-variable\">';variables.each(function(variableGroup){if(variableGroup.label&&variableGroup.value){this.variablesContent+='<li><b>'+variableGroup.label.escapeHTML()+'</b></li>';variableGroup.value.each(function(variable){if(variable.value&&variable.label){this.variablesValue.push(variable.value);this.variablesContent+='<li>'+\nthis.prepareVariableRow(this.variablesValue.length,variable.label)+'</li>';}}.bind(this));}}.bind(this));this.variablesContent+='</ul>';}\nif(this.variablesContent){this.openDialogWindow(this.variablesContent);}},openDialogWindow:function(variablesContent){var windowId=this.dialogWindowId;jQuery('<div id=\"'+windowId+'\">'+variablesContent+'</div>').modal({title:$t('Insert Variable...'),type:'slide',buttons:[],closed:function(e,modal){modal.modal.remove();}});jQuery('#'+windowId).modal('openModal');},closeDialogWindow:function(){jQuery('#'+this.dialogWindowId).modal('closeModal');},prepareVariableRow:function(index,varLabel){return'<a href=\"#\" onclick=\"'+\nthis.insertFunction+'('+\nindex+');return false;\">'+\nvarLabel.escapeHTML()+'</a>';},insertVariable:function(variable){var windowId=this.dialogWindowId,textareaElm,scrollPos;jQuery('#'+windowId).modal('closeModal');textareaElm=$(this.textareaElementId);if(textareaElm){scrollPos=textareaElm.scrollTop;if(!isNaN(variable)){updateElementAtCursor(textareaElm,Variables.variablesValue[variable-1]);}else{updateElementAtCursor(textareaElm,variable);}\ntextareaElm.focus();textareaElm.scrollTop=scrollPos;jQuery(textareaElm).trigger('change');textareaElm=null;}}};window.MagentovariablePlugin={editor:null,variables:null,textareaId:null,setEditor:function(editor){this.editor=editor;},loadChooser:function(url,textareaId){this.textareaId=textareaId;if(this.variables==null){new Ajax.Request(url,{parameters:{},onComplete:function(transport){if(transport.responseText.isJSON()){Variables.init(null,'MagentovariablePlugin.insertVariable');this.variables=transport.responseText.evalJSON();this.openChooser(this.variables);}}.bind(this)});}else{this.openChooser(this.variables);}},openChooser:function(variables){Variables.openVariableChooser(variables);},insertVariable:function(value){if(this.textareaId){Variables.init(this.textareaId);Variables.insertVariable(value);}else{Variables.closeDialogWindow();this.editor.execCommand('mceInsertContent',false,value);}}};});","Magento_Theme/js/bootstrap.min.js":"require(['jquery/fileUploader/jquery.fileupload-ui','mage/adminhtml/browser','Magento_Theme/js/form']);","Magento_Theme/js/custom-js-list.min.js":"define(['jquery','mage/template','jquery/ui'],function($,mageTemplate){'use strict';$.widget('theme.themeJsList',{options:{templateId:null,emptyTemplateId:null,refreshFileListEvent:null,prefixItemId:'',suffixItemId:''},_create:function(){this._bind();},_bind:function(){$('body').on(this.options.refreshFileListEvent,$.proxy(this._onRefreshList,this));},_onRefreshList:function(event,data){$(this.element).html('');if(data.jsList.length){this._renderList(data.jsList);}else{this._renderEmptyList();}},_getItemId:function(fileId){return this.options.prefixItemId+fileId+this.options.suffixItemId;},_renderList:function(jsList){var itemTmpl,index,tmpl;for(index=0;index<jsList.length;index++){itemTmpl=$('<li></li>').html($(this.options.templateId).html());$(itemTmpl).attr('class',$(this.options.templateId).attr('class'));itemTmpl.attr('id',this._getItemId(jsList[index].id));tmpl=mageTemplate(itemTmpl.html(),{data:jsList[index]});itemTmpl.html(tmpl);itemTmpl.removeClass('no-display');itemTmpl.appendTo(this.element);}},_renderEmptyList:function(){var itemTmpl=$('<li></li>').html($(this.options.emptyTemplateId).html());$(itemTmpl).attr('class',$(this.options.emptyTemplateId).attr('class'));itemTmpl.attr('id','empty-js-list');itemTmpl.removeClass('no-display');itemTmpl.appendTo(this.element);}});});","Magento_Theme/js/form.min.js":"define(['prototype'],function(){'use strict';function parentThemeOnChange(selected,defaultsById){var statusBar=$$('.tab-item-link')[0],isChanged=statusBar.hasClassName('changed'),defaults;if(!isChanged){defaults=defaultsById[selected];$('theme_title').value=defaults['theme_title'];}}\nwindow.parentThemeOnChange=parentThemeOnChange;});","Magento_Theme/js/sortable.min.js":"define(['jquery','jquery/ui'],function($){'use strict';$.widget('mage.sortable',$.ui.sortable,{options:{moveUpEvent:'moveUp',moveDownEvent:'moveDown'},_create:function(){this._super();this.initButtons();this.bind();},initButtons:function(){this.element.find('input.up').on('click',$.proxy(function(event){$('body').trigger(this.options.moveUpEvent,{item:$(event.target).parent('li')});},this));this.element.find('input.down').on('click',$.proxy(function(event){$('body').trigger(this.options.moveDownEvent,{item:$(event.target).parent('li')});},this));},bind:function(){var $body=$('body');$body.on(this.options.moveUpEvent,$.proxy(this._onMoveUp,this));$body.on(this.options.moveDownEvent,$.proxy(this._onMoveDown,this));},_onMoveUp:function(event,data){data.item.insertBefore(data.item.prev());},_onMoveDown:function(event,data){data.item.insertAfter(data.item.next());}});return $.mage.sortable;});","Magento_Theme/js/form/component/robots-reset-button.min.js":"define(['Magento_Ui/js/form/components/button','uiRegistry'],function(Button,registry){'use strict';return Button.extend({defaults:{customInstructionField:'${ $.parentName }.custom_instructions',label:'',buttonTpl:'Magento_Theme/form/element/button'},_parseJson:function(json){return JSON.parse(json);},reset:function(defaultRobotsTxt){var customInstructions=registry.get(this.customInstructionField);if(customInstructions){customInstructions.set('value',this._parseJson(defaultRobotsTxt));}}});});","Magento_Eav/js/input-types.min.js":"define(['jquery','mage/translate'],function($){'use strict';return function(config){$('select#frontend_input').each(function(){var select=$(this),currentValue=select.find('option:selected').val(),compatibleTypes=config.inputTypes,enabledTypes=[],iterator,warning=$('<label>').hide().text($.mage.__('These changes affect all related products.')).addClass('mage-error').attr({generated:true,for:select.attr('id')}),hint=$('<p>').hide().addClass('note').attr({generated:true}),hints=config.hints,toggleWarning=function(){if(select.find('option:selected').val()===currentValue){warning.hide();}else{warning.show();}},toggleHint=function(){if(typeof hints[select.find('option:selected').val()]!=='undefined'){select.after(hint.show().text(hints[select.find('option:selected').val()]));}else{hint.hide();}},removeOption=function(){if(!~enabledTypes.indexOf($(this).val())){$(this).remove();}};for(iterator=0;iterator<compatibleTypes.length;iterator++){if(compatibleTypes[iterator].indexOf(currentValue)>=0){enabledTypes=compatibleTypes[iterator];}}\nif(~enabledTypes.indexOf(currentValue)){select.prop('disabled',false).find('option').each(removeOption);select.after(warning).on('change',toggleWarning);}\nselect.on('change',toggleHint);toggleHint();});};});","Magento_CatalogInventory/js/components/qty-validator-changer.min.js":"define(['Magento_Ui/js/form/element/abstract'],function(Abstract){'use strict';return Abstract.extend({defaults:{valueUpdate:'input'},handleChanges:function(value){var isDigits=value!==1;this.validation['validate-integer']=isDigits;this.validation['less-than-equals-to']=isDigits?99999999:99999999.9999;this.validate();}});});","Magento_CatalogInventory/js/components/use-config-min-sale-qty.min.js":"define(['Magento_Ui/js/form/element/single-checkbox','underscore','uiRegistry'],function(checkbox,_,registry){'use strict';return checkbox.extend({defaults:{valueFromConfig:''},initObservable:function(){return this._super().observe(['valueFromConfig']);},initialize:function(){this._super();this.onCheckedChanged(this.checked());return this;},onCheckedChanged:function(newChecked){var valueFromConfig=this.valueFromConfig();if(newChecked&&(_.isArray(valueFromConfig)&&valueFromConfig.length===0||valueFromConfig===1)){this.changeVisibleDisabled(this.inputField,true,true,1);}else if(newChecked&&_.isObject(valueFromConfig)){this.changeVisibleDisabled(this.inputField,false,true,null);this.changeVisibleDisabled(this.dynamicRowsField,true,true,null);}else if(newChecked&&_.isNumber(valueFromConfig)){this.changeVisibleDisabled(this.inputField,true,true,null);this.changeVisibleDisabled(this.dynamicRowsField,false,true,null);}else{this.changeVisibleDisabled(this.inputField,true,this.disabled()||false,null);this.changeVisibleDisabled(this.dynamicRowsField,false,true,null);}\nthis._super(newChecked);},changeVisibleDisabled:function(filter,visible,disabled,valueFromConfig){registry.async(filter)(function(currentComponent){var initialValue=currentComponent.initialValue;if(_.isString(initialValue)||initialValue===0||valueFromConfig===1){currentComponent.value(1);}else if(initialValue){currentComponent.value(initialValue);}\ncurrentComponent.visible(visible);currentComponent.disabled(disabled);});}});});","Magento_CatalogInventory/js/components/use-config-settings.min.js":"define(['Magento_Ui/js/form/element/single-checkbox'],function(checkbox){'use strict';return checkbox.extend({defaults:{valueFromConfig:'',linkedValue:'',disableParent:false,listens:{disabled:'processState',checked:'processState onCheckedChanged'},imports:{readOnly:'ns = ${ $.ns }, index = stock_data:disabled'}},initObservable:function(){return this._super().observe(['valueFromConfig','linkedValue','disableParent']);},processState:function(){this.disableParent(this.checked()||this.readOnly);if(this.readOnly){this.disable();}},onCheckedChanged:function(newChecked){if(newChecked){this.linkedValue(this.valueFromConfig());}\nthis._super(newChecked);}});});","Magento_Downloadable/downloadable-type-handler.min.js":"define(['jquery','Magento_Catalog/js/product/weight-handler','Magento_Catalog/catalog/type-events'],function($,weight,productType){'use strict';return{$checkbox:$('[data-action=change-type-product-downloadable]'),$items:$('#product_info_tabs_downloadable_items'),$tab:null,isDownloadable:false,show:function(){this.$checkbox.prop('checked',true);this.$items.show();},hide:function(){this.$checkbox.prop('checked',false);this.$items.hide();},'Magento_Downloadable/downloadable-type-handler':function(data){this.$tab=$('[data-tab='+data.tabId+']');this.isDownloadable=data.isDownloadable;this.bindAll();this._initType();},bindAll:function(){this.$checkbox.on('change',function(event){$(document).trigger('setTypeProduct',$(event.target).prop('checked')?'downloadable':productType.type.init==='downloadable'?'virtual':productType.type.init);});$(document).on('changeTypeProduct',this._initType.bind(this));},_initType:function(){if(productType.type.current==='downloadable'){weight.change(false);weight.$weightSwitcher().one('change',function(){$(document).trigger('setTypeProduct',productType.type.init==='downloadable'?'virtual':productType.type.init);});this.show();}else{this.hide();}}};});","Magento_Downloadable/js/components/file-uploader.min.js":"define(['Magento_Ui/js/form/element/file-uploader'],function(Element){'use strict';return Element.extend({defaults:{fileInputName:''},addFile:function(file){var processedFile=this.processFile(file),tmpFile=[],resultFile={'file':processedFile.file,'name':processedFile.name,'size':processedFile.size,'status':processedFile.status?processedFile.status:'new'};tmpFile[0]=resultFile;this.isMultipleFiles?this.value.push(tmpFile):this.value(tmpFile);return this;}});});","Magento_Downloadable/js/components/is-downloadable-handler.min.js":"define(['Magento_Ui/js/form/element/single-checkbox'],function(Element){'use strict';return Element.extend({defaults:{listens:{disabled:'changeVisibility'},modules:{samplesFieldset:'${ $.samplesFieldset }',linksFieldset:'${ $.linksFieldset}'}},changeVisibility:function(){if(this.samplesFieldset()&&this.linksFieldset()){if(this.checked()&&!this.disabled()){this.samplesFieldset().visible(true);this.linksFieldset().visible(true);}else{this.samplesFieldset().visible(false);this.linksFieldset().visible(false);}}},onCheckedChanged:function(newChecked){this.changeVisibility();this._super(newChecked);}});});","Magento_Downloadable/js/components/price-handler.min.js":"define(['Magento_Ui/js/form/element/abstract'],function(Element){'use strict';return Element.extend({defaults:{linksPurchasedSeparately:'0',useDefaultPrice:false,listens:{linksPurchasedSeparately:'changeDisabledStatus',useDefaultPrice:'changeDisabledStatus'}},initialize:function(){this._super();this.changeDisabledStatus();return this;},changeDisabledStatus:function(){if(this.linksPurchasedSeparately==='1'){if(this.useDefaultPrice){this.disabled(true);}else{this.disabled(false);}}else{this.disabled(true);}}});});","Magento_Downloadable/js/components/upload-type-handler.min.js":"define(['Magento_Ui/js/form/element/select','uiRegistry'],function(Select,registry){'use strict';return Select.extend({defaults:{listens:{value:'changeTypeUpload'},typeUrl:'file',typeFile:'link_url',filterPlaceholder:'ns = ${ $.ns }, parentScope = ${ $.parentScope }'},initialize:function(){return this._super().changeTypeUpload(this.initialValue);},onUpdate:function(currentValue){this.changeTypeUpload(currentValue);return this._super();},changeTypeUpload:function(currentValue){var componentFile=this.filterPlaceholder+', index='+this.typeFile,componentUrl=this.filterPlaceholder+', index='+this.typeUrl;switch(currentValue){case'file':this.changeVisible(componentFile,true);this.changeVisible(componentUrl,false);break;case'url':this.changeVisible(componentFile,false);this.changeVisible(componentUrl,true);break;}},changeVisible:function(filter,visible){registry.async(filter)(function(currentComponent){currentComponent.visible(visible);});}});});","Magento_Downloadable/js/components/use-price-default-handler.min.js":"define(['Magento_Ui/js/form/element/single-checkbox'],function(Element){'use strict';return Element.extend({defaults:{linksPurchasedSeparately:'0',listens:{linksPurchasedSeparately:'changeVisibleStatus'}},changeVisibleStatus:function(){if(this.linksPurchasedSeparately==='1'){this.visible(true);}else{this.visible(false);}}});});","Magento_Review/js/rating.min.js":"define(['jquery','jquery/ui'],function($){'use strict';$.widget('marketing.ratingControl',{options:{colorFilled:'#333',colorUnfilled:'#CCCCCC',colorHover:'#f30'},_create:function(){this._labels=this.element.find('label');this._bind();},_bind:function(){this._labels.on({click:$.proxy(function(e){$(e.currentTarget).prev().prop('checked',true);this._updateRating();},this),hover:$.proxy(function(e){this._updateHover($(e.currentTarget),this.options.colorHover);},this),mouseleave:$.proxy(function(e){this._updateHover($(e.currentTarget),this.options.colorUnfilled);},this)});this._updateRating();},_updateHover:function(elem,color){elem.nextAll('label').addBack().filter(function(){return!$(this).data('checked');}).css('color',color);},_updateRating:function(){var checkedInputs=this.element.find('input[type=\"radio\"]:checked');checkedInputs.nextAll('label').addBack().css('color',this.options.colorFilled).data('checked',true);checkedInputs.prevAll('label').css('color',this.options.colorUnfilled).data('checked',false);},removeRating:function(){var checkedInputs=this.element.find('input[type=\"radio\"]');checkedInputs.nextAll('label').css('color',this.options.colorUnfilled).data('checked',false);}});});","Magento_ConfigurableProduct/js/configurable.min.js":"define(['jquery','mage/template','mage/translate','prototype'],function(jQuery,mageTemplate){'use strict';if(typeof Product=='undefined'){window.Product={};}\nProduct.Config=Class.create();Product.Config.prototype={initialize:function(config){var separatorIndex,paramsStr,urlValues,i,childSettings,prevSetting,nextSetting;config.taxConfig={showBothPrices:false,inclTaxTitle:jQuery.mage.__('Incl. Tax')};this.config=config;this.taxConfig=this.config.taxConfig;if(config.containerId){this.settings=$$('#'+config.containerId+' '+'.super-attribute-select');}else{this.settings=$$('.super-attribute-select');}\nthis.state=new Hash();this.priceTemplate=mageTemplate(this.config.template);this.prices=config.prices;this.values={};if(config.defaultValues){this.values=config.defaultValues;}\nseparatorIndex=window.location.href.indexOf('#');if(separatorIndex!=-1){paramsStr=window.location.href.substr(separatorIndex+1);urlValues=paramsStr.toQueryParams();for(i in urlValues){this.values[i]=urlValues[i];}}\nif(config.inputsInitialized){this.values={};this.settings.each(function(element){var attributeId;if(element.value){attributeId=element.id.replace(/[a-z]*/,'');this.values[attributeId]=element.value;}}.bind(this));}\nthis.settings.each(function(element){Event.observe(element,'change',this.configure.bind(this));}.bind(this));this.settings.each(function(element){var attributeId=element.id.replace(/[a-z]*/,'');if(attributeId&&this.config.attributes[attributeId]){element.config=this.config.attributes[attributeId];element.attributeId=attributeId;this.state[attributeId]=false;}}.bind(this));childSettings=[];for(i=this.settings.length-1;i>=0;i--){prevSetting=this.settings[i-1]?this.settings[i-1]:false;nextSetting=this.settings[i+1]?this.settings[i+1]:false;if(i===0){this.fillSelect(this.settings[i]);}else{this.settings[i].disabled=true;}\n$(this.settings[i]).childSettings=childSettings.clone();$(this.settings[i]).prevSetting=prevSetting;$(this.settings[i]).nextSetting=nextSetting;childSettings.push(this.settings[i]);}\nthis.configureForValues();document.observe('dom:loaded',this.configureForValues.bind(this));},configureForValues:function(){if(this.values){this.settings.each(function(element){var attributeId=element.attributeId;element.value=typeof this.values[attributeId]==='undefined'?'':this.values[attributeId];this.configureElement(element);}.bind(this));}},configure:function(event){var element=Event.element(event);this.configureElement(element);},configureElement:function(element){this.reloadOptionLabels(element);if(element.value){this.state[element.config.id]=element.value;if(element.nextSetting){element.nextSetting.disabled=false;this.fillSelect(element.nextSetting);this.resetChildren(element.nextSetting);}}else{this.resetChildren(element);}\nthis.reloadPrice();},reloadOptionLabels:function(element){var selectedPrice=0,option,i;if(element.options[element.selectedIndex]&&element.options[element.selectedIndex].config){option=element.options[element.selectedIndex].config;selectedPrice=parseFloat(this.config.optionPrices[option.allowedProducts[0]].finalPrice.amount);}\nelement.setAttribute('price',selectedPrice);for(i=0;i<element.options.length;i++){if(element.options[i].config){element.options[i].setAttribute('price',selectedPrice);element.options[i].setAttribute('summarizePrice',0);element.options[i].text=this.getOptionLabel(element.options[i].config,selectedPrice);}}},resetChildren:function(element){var i;if(element.childSettings){for(i=0;i<element.childSettings.length;i++){element.childSettings[i].selectedIndex=0;element.childSettings[i].disabled=true;if(element.config){this.state[element.config.id]=false;}}}},fillSelect:function(element){var attributeId=element.id.replace(/[a-z]*/,''),options=this.getAttributeOptions(attributeId),prevConfig=false,index=1,i,j,allowedProducts;this.clearSelect(element);element.options[0]=new Option('','');element.options[0].innerHTML=this.config.chooseText;if(element.prevSetting){prevConfig=element.prevSetting.options[element.prevSetting.selectedIndex];}\nif(options){for(i=0;i<options.length;i++){allowedProducts=[];if(prevConfig){for(j=0;j<options[i].products.length;j++){if(prevConfig.config.allowedProducts&&prevConfig.config.allowedProducts.indexOf(options[i].products[j])>-1){allowedProducts.push(options[i].products[j]);}}}else{allowedProducts=options[i].products.clone();}\nif(allowedProducts.size()>0){options[i].allowedProducts=allowedProducts;element.options[index]=new Option(this.getOptionLabel(options[i]),options[i].id);if(typeof options[i].price!='undefined'){element.options[index].setAttribute('price',options[i].price);}\nelement.options[index].config=options[i];index++;}}}},getOptionLabel:function(option){return option.label;},formatPrice:function(price,showSign){var str='',roundedPrice;price=parseFloat(price);if(showSign){if(price<0){str+='-';price=-price;}else{str+='+';}}\nroundedPrice=Number(Math.round(price+'e+2')+'e-2').toString();if(this.prices&&this.prices[roundedPrice]){str+=this.prices[roundedPrice];}else{str+=this.priceTemplate({data:{price:price.toFixed(2)}});}\nreturn str;},clearSelect:function(element){var i;for(i=element.options.length-1;i>=0;i--){element.remove(i);}},getAttributeOptions:function(attributeId){if(this.config.attributes[attributeId]){return this.config.attributes[attributeId].options;}},reloadPrice:function(){var price=0,oldPrice=0,inclTaxPrice=0,exclTaxPrice=0,i,selected;if(this.config.disablePriceReload){return undefined;}\nfor(i=this.settings.length-1;i>=0;i--){selected=this.settings[i].options[this.settings[i].selectedIndex];if(selected.config){price+=parseFloat(selected.config.price);oldPrice+=parseFloat(selected.config.oldPrice);inclTaxPrice+=parseFloat(selected.config.inclTaxPrice);exclTaxPrice+=parseFloat(selected.config.exclTaxPrice);}}\noptionsPrice.changePrice('config',{'price':price,'oldPrice':oldPrice,'inclTaxPrice':inclTaxPrice,'exclTaxPrice':exclTaxPrice});optionsPrice.reload();return price;},reloadOldPrice:function(){var price,i,selected;if(this.config.disablePriceReload){return;}\nif($('old-price-'+this.config.productId)){price=parseFloat(this.config.oldPrice);for(i=this.settings.length-1;i>=0;i--){selected=this.settings[i].options[this.settings[i].selectedIndex];if(selected.config){price+=parseFloat(selected.config.price);}}\nif(price<0){price=0;}\nprice=this.formatPrice(price);if($('old-price-'+this.config.productId)){$('old-price-'+this.config.productId).innerHTML=price;}}}};});","Magento_ConfigurableProduct/js/configurable-type-handler.min.js":"define(['jquery','Magento_Catalog/catalog/type-events','collapsible','Magento_Ui/js/modal/modal','mage/translate','domReady!'],function($,productType){'use strict';return{$block:null,hasVariations:null,configurationSectionMessageHandler:(function(){var title=$('[data-role=\"product-create-configuration-info\"]'),buttons=$('[data-action=\"product-create-configuration-buttons\"]'),newText='Configurations cannot be created for a standard product with downloadable files.'+' To create configurations, first remove all downloadable files.',oldText=title.text();return function(change){if(change){title.text(newText);buttons.hide();}else{title.text(oldText);buttons.show();}};}()),_setElementDisabled:function($element,state,triggerEvent){if(!$element.is('[data-locked]')){$element.prop('disabled',state);if(triggerEvent){$element.trigger('change');}}},show:function(){this.configurationSectionMessageHandler(false);},hide:function(){this.configurationSectionMessageHandler(true);},bindAll:function(){$(document).on('changeConfigurableTypeProduct',function(event,isConfigurable){$(document).trigger('setTypeProduct',isConfigurable?'configurable':productType.type.init==='configurable'?'simple':productType.type.init);});$(document).on('changeTypeProduct',this._initType.bind(this));},_initType:function(){this.show();},'Magento_ConfigurableProduct/js/configurable-type-handler':function(data){this.$block=$(data.blockId+' input[name=\"attributes[]\"]');this.hasVariations=data.hasVariations;$(document).trigger('setTypeProduct','simple');this.bindAll();this._initType();}};});","Magento_ConfigurableProduct/js/components/associated-product-insert-listing.min.js":"define(['underscore','Magento_Ui/js/form/components/insert-listing'],function(_,insertListing){'use strict';return insertListing.extend({defaults:{gridInitialized:false,paramsUpdated:false,showMassActionColumn:true,currentProductId:0,dataScopeAssociatedProduct:'data.associated_product_ids',typeGrid:'',product:{},rowIndexForChange:undefined,changeProductData:[],modules:{productsProvider:'${ $.productsProvider }',productsColumns:'${ $.productsColumns }',productsMassAction:'${ $.productsMassAction }',modalWithGrid:'${ $.modalWithGrid }',productsFilters:'${ $.productsFilters }'},exports:{externalProviderParams:'${ $.externalProvider }:params'},links:{changeProductData:'${ $.provider }:${ $.changeProductProvider }'},listens:{'${ $.externalProvider }:params':'_setFilters _setVisibilityMassActionColumn','${ $.productsProvider }:data':'_handleManualGridOpening','${ $.productsMassAction }:selected':'_handleManualGridSelect'}},initObservable:function(){this._super().observe('changeProductData');return this;},getUsedProductIds:function(){var usedProductsIds=this.source.get(this.dataScopeAssociatedProduct);return usedProductsIds.slice();},doRender:function(showMassActionColumn,typeGrid){this.typeGrid=typeGrid;this.showMassActionColumn=showMassActionColumn;if(this.gridInitialized){this.paramsUpdated=false;this.productsFilters().clear();this._setFilters(this.externalProviderParams);this._setVisibilityMassActionColumn();}\nreturn this.render();},showGridAssignProduct:function(){this.product={};this.rowIndexForChange=undefined;return this.doRender(true,'assignProduct');},showGridChangeProduct:function(rowIndex,product){this.rowIndexForChange=rowIndex;this.product=product;this.doRender(false,'changeProduct');},selectProduct:function(rowIndex){this.changeProductData({rowIndex:this.rowIndexForChange,product:this.productsProvider().data.items[rowIndex]});this.modalWithGrid().closeModal();},_setVisibilityMassActionColumn:function(){this.productsMassAction(function(massActionComponent){this.productsColumns().elems().each(function(rowElement){rowElement.disableAction=this.showMassActionColumn;},this);massActionComponent.visible=this.showMassActionColumn;}.bind(this));},_setFilters:function(params){var filterModifier={},attrCodes,usedProductIds,attributes;params=_.omit(params);if(!this.paramsUpdated){this.gridInitialized=true;this.paramsUpdated=true;attrCodes=this._getAttributesCodes();usedProductIds=this.getUsedProductIds();if(this.currentProductId){usedProductIds.push(this.currentProductId);}\nfilterModifier['entity_id']={'condition_type':'nin',value:usedProductIds};attrCodes.each(function(code){filterModifier[code]={'condition_type':'notnull'};});if(this.typeGrid==='changeProduct'){attributes=JSON.parse(this.product.attributes);filterModifier=_.extend(filterModifier,_.mapObject(attributes,function(value){return{'condition_type':'eq','value':value};}));params.filters=attributes;}else{params.filters={};}\nparams['attributes_codes']=attrCodes;this.set('externalProviderParams',params);this.set('externalFiltersModifier',filterModifier);}},_getAttributesCodes:function(){var attrCodes=this.source.get('data.attribute_codes');return attrCodes?attrCodes:[];},_getProductVariations:function(){var matrix=this.source.get('data.configurable-matrix');return matrix?matrix:[];},_handleManualGridOpening:function(data){if(data.items.length&&this.typeGrid==='assignProduct'){this.productsColumns().elems().each(function(rowElement){rowElement.disableAction=true;});this._disableRows(data.items);}},_handleManualGridSelect:function(selected){var selectedRows,selectedVariationKeys;if(this.typeGrid==='assignProduct'){selectedRows=_.filter(this.productsProvider().data.items,function(row){return selected.indexOf(row['entity_id'])!==-1;});selectedVariationKeys=_.values(this._getVariationKeyMap(selectedRows));this._disableRows(this.productsProvider().data.items,selectedVariationKeys,selected);}},_disableRows:function(items,selectedVariationKeys,selected){selectedVariationKeys=selectedVariationKeys===undefined?[]:selectedVariationKeys;selected=selected===undefined?[]:selected;this.productsMassAction(function(massaction){var configurableVariationKeys=_.union(selectedVariationKeys,_.pluck(this._getProductVariations(),'variationKey')),variationKeyMap=this._getVariationKeyMap(items),rowsForDisable=_.keys(_.pick(variationKeyMap,function(variationKey){return configurableVariationKeys.indexOf(variationKey)!==-1;}));massaction.disabled(_.difference(rowsForDisable,selected));}.bind(this));},_getVariationKeyMap:function(items){var variationKeyMap={};_.each(items,function(row){variationKeyMap[row['entity_id']]=_.values(_.pick(row,this._getAttributesCodes())).sort().join('-');},this);return variationKeyMap;}});});","Magento_ConfigurableProduct/js/components/container-configurable-handler.min.js":"define(['uiComponent'],function(Element){'use strict';return Element.extend({defaults:{listens:{'${ $.provider }:data.is_downloadable':'handleProductType'},links:{isDownloadable:'${ $.provider }:data.is_downloadable'},modules:{createConfigurableButton:'${$.createConfigurableButton}'}},initialize:function(){this._super();this.handleProductType(this.isDownloadable);return this;},initObservable:function(){this._super().observe(['content']);return this;},handleProductType:function(isDownloadable){if(isDownloadable==='1'){this.content(this.content2);if(this.createConfigurableButton()){this.createConfigurableButton().visible(false);}}else{this.content(this.content1);if(this.createConfigurableButton()){this.createConfigurableButton().visible(true);}}}});});","Magento_ConfigurableProduct/js/components/custom-options-price-type.min.js":"define(['underscore','Magento_Catalog/js/components/custom-options-price-type'],function(_,PriceType){'use strict';return PriceType.extend({defaults:{isConfigurable:false,isFiltered:null,defaultOptions:null,filteredOptions:null,bannedOptions:[]},updateOptions:function(variationsEmpty){var isFiltered=this.isConfigurable||!variationsEmpty,value;if(this.isFiltered!==isFiltered){value=this.value();this.options(isFiltered?this.getFilteredOptions():this.getDefaultOptions());this.value(value);}\nreturn isFiltered;},getDefaultOptions:function(){if(this.defaultOptions===null){this.defaultOptions=this.options();}\nreturn this.defaultOptions;},getFilteredOptions:function(){var defaultOptions;if(this.filteredOptions===null){defaultOptions=this.getDefaultOptions();this.filteredOptions=[];_.each(defaultOptions,function(option){if(this.bannedOptions.indexOf(option.value)===-1){this.filteredOptions.push(option);}},this);}\nreturn this.filteredOptions;}});});","Magento_ConfigurableProduct/js/components/custom-options-warning.min.js":"define(['Magento_Ui/js/form/components/html'],function(Html){'use strict';return Html.extend({defaults:{isConfigurable:false},updateVisibility:function(variationsEmpty){var isVisible=this.isConfigurable||!variationsEmpty;this.visible(isVisible);return isVisible;}});});","Magento_ConfigurableProduct/js/components/dynamic-rows-configurable.min.js":"define(['underscore','uiRegistry','Magento_Ui/js/dynamic-rows/dynamic-rows','jquery'],function(_,registry,dynamicRows,$){'use strict';return dynamicRows.extend({defaults:{actionsListOpened:false,canEditField:'canEdit',newProductField:'newProduct',dataScopeAssociatedProduct:'data.associated_product_ids',dataProviderFromGrid:'',dataProviderChangeFromGrid:'',insertDataFromGrid:[],changeDataFromGrid:[],dataProviderFromWizard:'',insertDataFromWizard:[],map:null,isEmpty:true,isShowAddProductButton:false,cacheGridData:[],unionInsertData:[],deleteProperty:false,dataLength:0,identificationProperty:'id','attribute_set_id':'',attributesTmp:[],changedFlag:'was_changed',listens:{'insertDataFromGrid':'processingInsertDataFromGrid','insertDataFromWizard':'processingInsertDataFromWizard','unionInsertData':'processingUnionInsertData','changeDataFromGrid':'processingChangeDataFromGrid','isEmpty':'changeVisibility'},imports:{'attribute_set_id':'${$.provider}:data.product.attribute_set_id'},'exports':{'attribute_set_id':'${$.provider}:data.new-variations-attribute-set-id'},modules:{modalWithGrid:'${ $.modalWithGrid }',gridWithProducts:'${ $.gridWithProducts}'}},initialize:function(){this._super().changeVisibility(this.isEmpty());return this;},changeVisibility:function(isEmpty){this.visible(!isEmpty);},openModalWithGrid:function(rowIndex){var productSource=this.source.get(this.dataScope+'.'+this.index+'.'+rowIndex),product={'id':productSource.id,'attributes':productSource['configurable_attribute']};this.modalWithGrid().openModal();this.gridWithProducts().showGridChangeProduct(rowIndex,product);},initChildren:function(){var tmpArray=[];this.recordData.each(function(recordData){tmpArray.push(recordData);},this);this.unionInsertData(tmpArray);return this;},deleteRecord:function(index){var tmpArray,lastRecord;this.reRender=false;tmpArray=this.getUnionInsertData();tmpArray.splice(index,1);if(!tmpArray.length){this.attributesTmp=this.source.get('data.attributes');this.source.set('data.attributes',[]);this.cacheGridData=[];}\nif(parseInt(this.currentPage(),10)===this.pages()){lastRecord=_.findWhere(this.elems(),{index:this.startIndex+this.getChildItems().length-1})||_.findWhere(this.elems(),{index:(this.startIndex+this.getChildItems().length-1).toString()});lastRecord.destroy();}\nthis.unionInsertData(tmpArray);if(this.pages()<parseInt(this.currentPage(),10)){this.currentPage(this.pages());}\nthis.reRender=true;this.showSpinner(false);},generateAssociatedProducts:function(){var productsIds=[];this.getUnionInsertData().forEach(function(data){if(data.id!==null){productsIds.push(data.id);}});this.source.set(this.dataScopeAssociatedProduct,productsIds);},initObservable:function(){this._super().observe(['insertDataFromGrid','unionInsertData','isEmpty','isShowAddProductButton','actionsListOpened']);return this;},getUnionInsertData:function(){var source=this.source.get(this.dataScope+'.'+this.index),result=[];_.each(source,function(data){result.push(data);});return result;},processingUnionInsertData:function(data){var dataCount,elemsCount,tmpData,path,attributeCodes=this.source.get('data.attribute_codes');this.isEmpty(data.length===0);this.isShowAddProductButton((!attributeCodes||data.length>0?data.length:attributeCodes.length)>0);tmpData=data.slice(this.pageSize*(this.currentPage()-1),this.pageSize*(this.currentPage()-1)+parseInt(this.pageSize,10));this.source.set(this.dataScope+'.'+this.index,[]);_.each(tmpData,function(row,index){path=this.dataScope+'.'+this.index+'.'+(this.startIndex+index);row.attributes=$('<i></i>').text(row.attributes).html();this.source.set(path,row);},this);this.source.set(this.dataScope+'.'+this.index,data);this.parsePagesData(data);dataCount=tmpData.length;elemsCount=this.elems().length;if(dataCount>elemsCount){tmpData.each(function(elemData,index){this.addChild(elemData,this.startIndex+index);},this);}else{for(elemsCount;elemsCount>dataCount;elemsCount--){this.elems()[elemsCount-1].destroy();}}\nthis.generateAssociatedProducts();},setInitialProperty:function(){return this;},processingInsertDataFromGrid:function(data){var changes,tmpArray;if(!data.length){return;}\ntmpArray=this.getUnionInsertData();changes=this._checkGridData(data);this.cacheGridData=data;changes.each(function(changedObject){var mappedData=this.mappingValue(changedObject);mappedData[this.canEditField]=0;mappedData[this.newProductField]=0;mappedData.variationKey=this._getVariationKey(changedObject);mappedData['configurable_attribute']=this._getConfigurableAttribute(changedObject);tmpArray.push(mappedData);},this);if(!this.source.get('data.attributes').length){this.source.set('data.attributes',this.attributesTmp);}\nthis.unionInsertData(tmpArray);},processingChangeDataFromGrid:function(data){var tmpArray=this.getUnionInsertData(),mappedData=this.mappingValue(data.product);mappedData[this.canEditField]=0;mappedData[this.newProductField]=0;mappedData.variationKey=this._getVariationKey(data.product);mappedData['configurable_attribute']=this._getConfigurableAttribute(data.product);tmpArray[data.rowIndex]=mappedData;this.unionInsertData(tmpArray);},_getVariationKey:function(data){var attrCodes=this.source.get('data.attribute_codes'),key=[];attrCodes.each(function(code){key.push(data[code]);});return key.sort().join('-');},_getConfigurableAttribute:function(data){var attrCodes=this.source.get('data.attribute_codes'),confAttrs={};attrCodes.each(function(code){confAttrs[code]=data[code];});return JSON.stringify(confAttrs);},processingInsertDataFromWizard:function(data){var tmpArray=this.getUnionInsertData(),productIdsToDelete=this.source.get(this.dataScopeAssociatedProduct),index,product={};tmpArray=this.unsetArrayItem(tmpArray,{id:null});_.each(data,function(row){if(row.productId){index=_.indexOf(productIdsToDelete,row.productId);if(index>-1){productIdsToDelete.splice(index,1);tmpArray=this.unsetArrayItem(tmpArray,{id:row.productId});}}\nproduct=this.getProductData(row);product[this.changedFlag]=true;product[this.canEditField]=row.editable;product[this.newProductField]=row.newProduct;tmpArray.push(product);},this);_.each(productIdsToDelete,function(id){tmpArray=this.unsetArrayItem(tmpArray,{id:id});},this);this.unionInsertData(tmpArray);},getProductData:function(row){var product,attributesText='';_.each(row.options,function(attribute){if(attributesText){attributesText+=', ';}\nattributesText+=attribute['attribute_label']+': '+attribute.label;},this);product={'id':row.productId,'product_link':row.productUrl,'name':row.name,'sku':row.sku,'status':row.status,'price':row.price,'price_currency':row.priceCurrency,'price_string':row.priceCurrency+row.price,'weight':row.weight,'qty':row.quantity,'variationKey':row.variationKey,'configurable_attribute':row.attribute,'thumbnail_image':row.images.preview,'media_gallery':row['media_gallery'],'swatch_image':row['swatch_image'],'small_image':row['small_image'],image:row.image,'thumbnail':row.thumbnail,'attributes':attributesText};return product;},unsetArrayItem:function(data,condition){var objs=_.where(data,condition);_.each(objs,function(obj){var index=_.indexOf(data,obj);if(index>-1){data.splice(index,1);}});return data;},_checkGridData:function(data){var cacheLength=this.cacheGridData.length,curData=data.length,max=cacheLength>curData?this.cacheGridData:data,changes=[],obj={};max.each(function(record,index){obj[this.map.id]=record[this.map.id];if(!_.where(this.cacheGridData,obj).length){changes.push(data[index]);}},this);return changes;},mappingValue:function(data){var result={};_.each(this.map,function(prop,index){result[index]=data[prop];});return result;},toggleActionsList:function(rowIndex){var state=false;if(rowIndex!==this.actionsListOpened()){state=rowIndex;}\nthis.actionsListOpened(state);return this;},closeList:function(rowIndex){if(this.actionsListOpened()===rowIndex){this.actionsListOpened(false);}\nreturn this;},toggleStatusProduct:function(rowIndex){var tmpArray=this.getUnionInsertData(),status=parseInt(tmpArray[rowIndex].status,10);if(status===1){tmpArray[rowIndex].status=2;}else{tmpArray[rowIndex].status=1;}\ntmpArray[rowIndex][this.changedFlag]=true;this.unionInsertData(tmpArray);}});});","Magento_ConfigurableProduct/js/components/file-uploader.min.js":"define(['Magento_Ui/js/form/element/file-uploader','underscore'],function(Element,_){'use strict';return Element.extend({processedFile:{},actionsListOpened:false,thumbnailUrl:'',thumbnail:null,smallImage:null,defaults:{fileInputName:''},initObservable:function(){this._super().observe(['processedFile','actionsListOpened','thumbnailUrl','thumbnail','smallImage']);return this;},setInitialValue:function(){var value=this.getInitialValue();if(!_.isString(value)){this._super();}\nreturn this;},addFile:function(file){this.processedFile(this.processFile(file));this.value(this.processedFile().file);return this;},toggleActionsList:function(){if(this.actionsListOpened()){this.actionsListOpened(false);}else{this.actionsListOpened(true);}\nreturn this;},closeList:function(){if(this.actionsListOpened()){this.actionsListOpened(false);}\nreturn this;},deleteImage:function(){this.processedFile({});this.value(null);this.thumbnail(null);this.thumbnailUrl(null);this.smallImage(null);return this;}});});","Magento_ConfigurableProduct/js/components/modal-configurable.min.js":"define(['Magento_Ui/js/modal/modal-component','uiRegistry','underscore'],function(Modal,registry,_){'use strict';return Modal.extend({defaults:{stepWizard:'',modules:{form:'${ $.formName }'}},openModal:function(){var stepWizard={};this.form().validate();if(this.form().source.get('params.invalid')===false){stepWizard=registry.get('index = '+this.stepWizard);if(!_.isUndefined(stepWizard)){stepWizard.open();}\nthis._super();}else{this.form().focusInvalid();}}});});","Magento_ConfigurableProduct/js/components/price-configurable.min.js":"define(['underscore','uiRegistry','Magento_Ui/js/form/element/abstract'],function(_,registry,Abstract){'use strict';return Abstract.extend({defaults:{imports:{isConfigurable:'!ns = ${ $.ns }, index = configurable-matrix:isEmpty'},modules:{createConfigurableButton:'${$.createConfigurableButton}'}},initialize:function(){this._super();this.handlePriceValue(this.isConfigurable);this.setListeners({isConfigurable:'handlePriceValue'});return this;},initObservable:function(){this._super().observe(['content']);return this;},handlePriceValue:function(isConfigurable){this.disabled(!!this.isUseDefault()||isConfigurable);this.required(!!this.isUseDefault()||!isConfigurable);if(isConfigurable){this.clear();}}});});","Magento_ConfigurableProduct/js/components/qty-configurable.min.js":"define(['Magento_Ui/js/form/element/abstract'],function(Abstract){'use strict';return Abstract.extend({defaults:{imports:{isConfigurable:'!ns = ${ $.ns }, index = configurable-matrix:isEmpty'}},initialize:function(){this._super();this.handleQtyValue(this.isConfigurable);this.setListeners({isConfigurable:'handleQtyValue'});return this;},handleQtyValue:function(isConfigurable){this.disabled(!!this.isUseDefault()||isConfigurable);if(isConfigurable){this.clear();}}});});","Magento_ConfigurableProduct/js/options/price-type-handler.min.js":"","Magento_ConfigurableProduct/js/variations/product-grid.min.js":"define(['uiComponent','jquery','Magento_Ui/js/core/app','underscore','notification','mage/translate'],function(Component,$,bootstrap,_){'use strict';return Component.extend({defaults:{productsGridUrl:null,productAttributes:[],productsModal:null,button:'',gridSelector:'[data-grid-id=associated-products-container]',modules:{productsFilter:'${ $.productsFilter }',productsProvider:'${ $.productsProvider }',productsMassAction:'${ $.productsMassAction }',productsColumns:'${ $.productsColumns }',variationsComponent:'${ $.configurableVariations }'},listens:{'${ $.productsProvider }:data':'_showMessageAssociatedGrid _handleManualGridOpening','${ $.productsMassAction }:selected':'_handleManualGridSelect','${ $.configurableVariations }:productMatrix':'_showButtonAddManual _switchProductType'}},initialize:function(options){this._super(options);this.productsModal=$(this.gridSelector).modal({title:$.mage.__('Select Associated Product'),type:'slide',buttons:[{text:$.mage.__('Cancel'),click:function(){this.closeModal();}},{text:$.mage.__('Done'),click:this.close.bind(this,null)}]});this.productsProvider(function(){this.productsModal.notification();}.bind(this));this.variationsComponent(function(variation){this._showButtonAddManual(variation.productMatrix());}.bind(this));this._initGrid=_.once(this._initGrid);this._switchProductType=_.wrap(this._switchProductType.bind(this),function(func,params){if(!!params.length!==!!this.init){this.init=!!params.length;func(params);}}.bind(this._switchProductType));},initObservable:function(){this._super().observe('button');return this;},_initGrid:function(filterData){$.ajax({type:'GET',url:this._buildGridUrl(filterData),context:$('body')}).done(function(data){bootstrap(JSON.parse(data));});},selectProduct:function(rowIndex){this.close(rowIndex);},open:function(filterData,callbackName,showMassActionColumn){this.callbackName=callbackName;this.productsMassAction(function(massActionComponent){this.productsColumns().elems().each(function(rowElement){rowElement.disableAction=showMassActionColumn;});massActionComponent.visible=showMassActionColumn;}.bind(this));this._setFilter(filterData);this._initGrid(filterData);this.productsModal.trigger('openModal');},close:function(rowIndex){try{if(this.productsMassAction().selected.getLength()){this.variationsComponent()[this.callbackName](this.productsMassAction().selected.map(this.getProductById.bind(this)));this.productsMassAction().deselectAll();}else if(!_.isNull(rowIndex)){this.variationsComponent()[this.callbackName]([this.getProductByIndex(rowIndex)]);}\nthis.productsModal.trigger('closeModal');}catch(e){if(e.name==='UserException'){this.productsModal.notification('clear');this.productsModal.notification('add',{message:e.message,messageContainer:this.gridSelector});}else{throw e;}}},getProductById:function(productId){return _.findWhere(this.productsProvider().data.items,{'entity_id':productId});},getProductByIndex:function(rowIndex){return this.productsProvider().data.items[rowIndex];},_buildGridUrl:function(filterData){var params='?'+$.param({'filters':filterData.filters,'attributes_codes':this._getAttributesCodes(),'filters_modifier':filterData['filters_modifier']});return this.productsGridUrl+params;},_showButtonAddManual:function(variations){return this.button(variations.length);},_switchProductType:function(variations){$(document).trigger('changeConfigurableTypeProduct',variations.length);},_getAttributesCodes:function(){return this.variationsComponent().attributes.pluck('code');},_showMessageAssociatedGrid:function(data){this.productsModal.notification('clear');if(data.items.length){this.productsModal.notification('add',{message:$.mage.__('Choose a new product to delete and replace the current product configuration.'),messageContainer:this.gridSelector});}else{this.productsModal.notification('add',{message:$.mage.__('For better results, add attributes and attribute values to your products.'),messageContainer:this.gridSelector});}},showManuallyGrid:function(){var filterModifier=_.mapObject(_.object(this._getAttributesCodes(),[]),function(){return{'condition_type':'notnull'};}),usedProductIds=_.values(this.variationsComponent().productAttributesMap);if(usedProductIds&&usedProductIds.length>0){filterModifier['entity_id']={'condition_type':'nin',value:usedProductIds};}\nthis.open({'filters_modifier':filterModifier},'appendProducts',true);},_handleManualGridOpening:function(data){if(data.items.length&&this.callbackName=='appendProducts'){this.productsColumns().elems().each(function(rowElement){rowElement.disableAction=true;});this._disableRows(data.items);}},_disableRows:function(items,selectedVariationKeys,selected){selectedVariationKeys=selectedVariationKeys===undefined?[]:selectedVariationKeys;selected=selected===undefined?[]:selected;this.productsMassAction(function(massaction){var configurableVariationKeys=_.union(selectedVariationKeys,_.pluck(this.variationsComponent().productMatrix(),'variationKey')),variationKeyMap=this._getVariationKeyMap(items),rowsForDisable=_.keys(_.pick(variationKeyMap,function(variationKey){return configurableVariationKeys.indexOf(variationKey)!==-1;}));massaction.disabled(_.difference(rowsForDisable,selected));}.bind(this));},_handleManualGridSelect:function(selected){var selectedRows,selectedVariationKeys;if(this.callbackName=='appendProducts'){selectedRows=_.filter(this.productsProvider().data.items,function(row){return selected.indexOf(row['entity_id'])!==-1;});selectedVariationKeys=_.values(this._getVariationKeyMap(selectedRows));this._disableRows(this.productsProvider().data.items,selectedVariationKeys,selected);}},_getVariationKeyMap:function(items){this._variationKeyMap={};_.each(items,function(row){this._variationKeyMap[row['entity_id']]=_.values(_.pick(row,this._getAttributesCodes())).sort().join('-');},this);return this._variationKeyMap;},_setFilter:function(filterData){this.productsProvider(function(provider){provider.params['filters_modifier']=filterData['filters_modifier'];provider.params['attributes_codes']=this._getAttributesCodes();}.bind(this));this.productsFilter(function(filter){filter.set('filters',_.extend({'filters_modifier':filterData['filters_modifier']},filterData.filters)).apply();});}});});","Magento_ConfigurableProduct/js/variations/variations.min.js":"define(['uiComponent','jquery','ko','underscore','Magento_Ui/js/modal/alert','uiRegistry','mage/translate'],function(Component,$,ko,_,alert,registry,$t){'use strict';function UserException(message){this.message=message;this.name='UserException';}\nUserException.prototype=Object.create(Error.prototype);return Component.extend({defaults:{opened:false,attributes:[],usedAttributes:[],attributeCodes:[],attributesData:{},productMatrix:[],variations:[],formSaveParams:[],productAttributes:[],disabledAttributes:[],fullAttributes:[],rowIndexToEdit:false,productAttributesMap:null,value:[],modules:{associatedProductGrid:'${ $.configurableProductGrid }',wizardButtonElement:'${ $.wizardModalButtonName }',formElement:'${ $.formName }',attributeSetHandlerModal:'${ $.attributeSetHandler }'},imports:{attributeSetName:'${ $.provider }:configurableNewAttributeSetName',attributeSetId:'${ $.provider }:configurableExistingAttributeSetId',attributeSetSelection:'${ $.provider }:configurableAffectedAttributeSet',productPrice:'${ $.provider }:data.product.price'},links:{value:'${ $.provider }:${ $.dataScopeVariations }',usedAttributes:'${ $.provider }:${ $.dataScopeAttributes }',attributesData:'${ $.provider }:${ $.dataScopeAttributesData }',attributeCodes:'${ $.provider }:${ $.dataScopeAttributeCodes }',skeletonAttributeSet:'${ $.provider }:data.new-variations-attribute-set-id'}},initialize:function(){this._super();this.changeButtonWizard();this.initProductAttributesMap();this.disableConfigurableAttributes(this.productAttributes);},initObservable:function(){this._super().observe('actions opened attributes productMatrix value usedAttributes attributesData attributeCodes');return this;},_makeProduct:function(product){var productId=product['entity_id']||product.productId||null,attributes=_.pick(product,this.attributes.pluck('code')),options=_.map(attributes,function(option,attribute){var oldOptions=_.findWhere(this.attributes(),{code:attribute}).options,result;if(_.isFunction(oldOptions)){result=oldOptions.findWhere({value:option});}else{result=_.findWhere(oldOptions,{value:option});}\nreturn result;}.bind(this));return{attribute:JSON.stringify(attributes),editable:false,images:{preview:product['thumbnail_src']},name:product.name||product.sku,options:options,price:parseFloat(Math.round(product.price.replace(/[^\\d.]+/g,'')+'e+4')+'e-4').toFixed(4),productId:productId,productUrl:this.buildProductUrl(productId),quantity:product.quantity||null,sku:product.sku,status:product.status===undefined?1:parseInt(product.status,10),variationKey:this.getVariationKey(options),weight:product.weight||null};},getProductValue:function(name){var value;name=name.split('/').join('][');value=$('[name=\"product['+name+']\"]:enabled:not(.ignore-validate)',this.productForm).val();if(value===undefined){value=this.source.get('data.product.'+name);}\nreturn value;},getRowId:function(data,field){var key=data.variationKey;return'variations-matrix-'+key+'-'+field;},getVariationRowName:function(variation,field){var result;if(variation.productId){result='configurations['+variation.productId+']['+field.split('/').join('][')+']';}else{result='variations-matrix['+variation.variationKey+']['+field.split('/').join('][')+']';}\nreturn result;},render:function(variations,attributes){this.changeButtonWizard();this.populateVariationMatrix(variations);this.attributes(attributes);this.disableConfigurableAttributes(attributes);this.handleValue(variations);this.handleAttributes();},changeButtonWizard:function(){if(this.variations.length){this.wizardButtonElement().title(this.wizardModalButtonTitle);}},handleValue:function(variations){var tmpArray=[];_.each(variations,function(variation){var attributes=_.reduce(variation.options,function(memo,option){var attribute={};attribute[option['attribute_code']]=option.value;return _.extend(memo,attribute);},{}),gallery={images:{}},types={};_.each(variation.images.images,function(image){gallery.images[image['file_id']]={position:image.position,file:image.file,disabled:image.disabled,label:image.label||''};_.each(image.galleryTypes,function(type){types[type]=image.file;});},this);tmpArray.push(_.extend(variation,types,{productId:variation.productId||null,name:variation.name||variation.sku,priceCurrency:this.currencySymbol,weight:variation.weight,attribute:JSON.stringify(attributes),variationKey:this.getVariationKey(variation.options),editable:variation.editable===undefined?0:1,productUrl:this.buildProductUrl(variation.productId),status:variation.status===undefined?1:parseInt(variation.status,10),newProduct:variation.productId?0:1,'media_gallery':gallery}));},this);this.value(tmpArray);},handleAttributes:function(){var tmpArray=[],codesArray=[],tmpOptions={},option={},position=0,values={};_.each(this.attributes(),function(attribute){tmpArray.push(attribute.id);codesArray.push(attribute.code);values={};_.each(attribute.chosen,function(row){values[row.value]={'include':'1','value_index':row.value};},this);option={'attribute_id':attribute.id,'code':attribute.code,'label':attribute.label,'position':position,'values':values};tmpOptions[attribute.id]=option;position++;},this);this.attributesData(tmpOptions);this.usedAttributes(tmpArray);this.attributeCodes(codesArray);},getAttributesOptions:function(){return this.showVariations()?this.productMatrix()[0].options:[];},showVariations:function(){return this.productMatrix().length>0;},populateVariationMatrix:function(variations){this.productMatrix([]);_.each(variations,function(variation){var attributes=_.reduce(variation.options,function(memo,option){var attribute={};attribute[option['attribute_code']]=option.value;return _.extend(memo,attribute);},{});this.productMatrix.push(_.extend(variation,{productId:variation.productId||null,name:variation.name||variation.sku,weight:variation.weight,attribute:JSON.stringify(attributes),variationKey:this.getVariationKey(variation.options),editable:variation.editable===undefined?!variation.productId:variation.editable,productUrl:this.buildProductUrl(variation.productId),status:variation.status===undefined?1:parseInt(variation.status,10)}));},this);},buildProductUrl:function(productId){return this.productUrl.replace('%id%',productId);},getVariationKey:function(options){return _.pluck(options,'value').sort().join('-');},getProductIdByOptions:function(options){return this.productAttributesMap[this.getVariationKey(options)]||null;},initProductAttributesMap:function(){if(this.productAttributesMap===null){this.productAttributesMap={};_.each(this.variations,function(product){this.productAttributesMap[this.getVariationKey(product.options)]=product.productId;}.bind(this));}},disableConfigurableAttributes:function(attributes){var element;_.each(this.disabledAttributes,function(attribute){registry.get('inputName = '+'product['+attribute+']').disabled(false);});this.disabledAttributes=[];_.each(attributes,function(attribute){element=registry.get('inputName = '+'product['+attribute.code+']');if(!_.isUndefined(element)){element.disabled(true);this.disabledAttributes.push(attribute.code);}},this);},getCurrencySymbol:function(){return this.currencySymbol;},saveFormHandler:function(){this.formElement().validate();if(this.formElement().source.get('params.invalid')===false){this.serializeData();}\nif(this.checkForNewAttributes()){this.formSaveParams=arguments;this.attributeSetHandlerModal().openModal();}else{if(this.validateForm(this.formElement())){this.clearOutdatedData();}\nthis.formElement().save(arguments[0],arguments[1]);if(this.formElement().source.get('params.invalid')){this.unserializeData();}}},validateForm:function(formElement){formElement.validate();return!formElement.additionalInvalid&&!formElement.source.get('params.invalid');},serializeData:function(){if(this.source.data['configurable-matrix']){this.source.data['configurable-matrix-serialized']=JSON.stringify(this.source.data['configurable-matrix']);}\nif(this.source.data['associated_product_ids']){this.source.data['associated_product_ids_serialized']=JSON.stringify(this.source.data['associated_product_ids']);}},clearOutdatedData:function(){if(this.source.data['configurable-matrix']){delete this.source.data['configurable-matrix'];}\nif(this.source.data['associated_product_ids']){delete this.source.data['associated_product_ids'];}},unserializeData:function(){if(this.source.data['configurable-matrix-serialized']){this.source.data['configurable-matrix']=JSON.parse(this.source.data['configurable-matrix-serialized']);delete this.source.data['configurable-matrix-serialized'];}\nif(this.source.data['associated_product_ids_serialized']){this.source.data['associated_product_ids']=JSON.parse(this.source.data['associated_product_ids_serialized']);delete this.source.data['associated_product_ids_serialized'];}},checkForNewAttributes:function(){var element,newAttributes=false;_.each(this.source.get('data.attribute_codes'),function(attribute){element=registry.get('index = '+attribute);if(_.isUndefined(element)){newAttributes=true;}},this);return newAttributes;},addNewAttributeSetHandler:function(){var chosenAttributeSetOption;this.formElement().validate();if(this.formElement().source.get('params.invalid')===false){chosenAttributeSetOption=this.attributeSetSelection;if(chosenAttributeSetOption==='new'){this.createNewAttributeSet();return false;}\nif(chosenAttributeSetOption==='existing'){this.set('skeletonAttributeSet',this.attributeSetId);}\nthis.closeDialogAndProcessForm();return true;}\nthis.unserializeData();return false;},createNewAttributeSet:function(){var messageBoxElement=registry.get('index = affectedAttributeSetError');messageBoxElement.visible(false);$.ajax({type:'POST',url:this.attributeSetCreationUrl,data:{gotoEdit:1,'attribute_set_name':this.attributeSetName,'skeleton_set':this.skeletonAttributeSet,'return_session_messages_only':1},dataType:'json',showLoader:true,context:this}).done(function(data){if(!data.error){this.set('skeletonAttributeSet',data.id);messageBoxElement.content(data.messages);messageBoxElement.visible(true);this.closeDialogAndProcessForm();}else{messageBoxElement.content(data.messages);messageBoxElement.visible(true);}\nreturn false;}).fail(function(xhr){if(xhr.statusText==='abort'){return;}\nalert({content:$t('Something went wrong.')});});return false;},closeDialogAndProcessForm:function(){this.attributeSetHandlerModal().closeModal();this.formElement().save(this.formSaveParams[0],this.formSaveParams[1]);},getProductPrice:function(){return this.productPrice;}});});","Magento_ConfigurableProduct/js/variations/paging/sizes.min.js":"define(['Magento_Ui/js/grid/paging/sizes'],function(Sizes){'use strict';return Sizes.extend({defaults:{options:{'20':{value:20,label:20},'30':{value:30,label:30},'50':{value:50,label:50}},value:20}});});","Magento_ConfigurableProduct/js/variations/steps/attributes_values.min.js":"define(['uiComponent','jquery','ko','underscore','mageUtils','Magento_Ui/js/lib/collapsible','mage/translate'],function(Component,$,ko,_,utils,Collapsible){'use strict';ko.bindingHandlers.sortableList={init:function(element,valueAccessor){var list=valueAccessor();$(element).sortable({axis:'y',handle:'[data-role=\"draggable\"]',tolerance:'pointer',update:function(event,ui){var item=ko.contextFor(ui.item[0]).$data,position=ko.utils.arrayIndexOf(ui.item.parent().children(),ui.item[0]);if(ko.contextFor(ui.item[0]).$index()!=position){if(position>=0){list.remove(item);list.splice(position,0,item);}\nui.item.remove();}}});}};return Collapsible.extend({defaults:{notificationMessage:{text:null,error:null},createOptionsUrl:null,attributes:[],stepInitialized:false},initialize:function(){this._super();this.createAttribute=_.wrap(this.createAttribute,function(){var args=_.toArray(arguments),createAttribute=args.shift();return this.doInitSavedOptions(createAttribute.apply(this,args));});this.createAttribute=_.memoize(this.createAttribute.bind(this),_.property('id'));},initObservable:function(){this._super().observe(['attributes']);return this;},createOption:function(){this.options.push({value:0,label:'',id:utils.uniqueid(),'attribute_id':this.id,'is_new':true});},saveOption:function(option){if(this.isValidOption(option)){this.options.remove(option);this.options.push(option);this.chosenOptions.push(option.id);}},isValidOption:function(newOption){var duplicatedOptions=[],errorOption,allOptions=[];newOption.label=newOption.label.trim();if(_.isEmpty(newOption.label)){return false;}\n_.each(this.options(),function(option){if(!_.isUndefined(allOptions[option.label])&&newOption.label===option.label){duplicatedOptions.push(option);}\nallOptions[option.label]=option.label;});if(duplicatedOptions.length){_.each(duplicatedOptions,function(duplicatedOption){errorOption=$('[data-role=\"'+duplicatedOption.id+'\"]');errorOption.addClass('_error');});return false;}\nreturn true;},removeOption:function(option){this.options.remove(option);},removeAttribute:function(attribute){this.attributes.remove(attribute);this.wizard.setNotificationMessage($.mage.__('An attribute has been removed. This attribute will no longer appear in your configurations.'));},createAttribute:function(attribute,index){attribute.chosenOptions=ko.observableArray([]);attribute.options=ko.observableArray(_.map(attribute.options,function(option){option.id=utils.uniqueid();return option;}));attribute.opened=ko.observable(this.initialOpened(index));attribute.collapsible=ko.observable(true);attribute.isValidOption=this.isValidOption;return attribute;},initialOpened:function(index){return index<3;},saveAttribute:function(){var errorMessage=$.mage.__('Select options for all attributes or remove unused attributes.');if(!this.attributes().length){throw new Error(errorMessage);}\n_.each(this.attributes(),function(attribute){attribute.chosen=[];if(!attribute.chosenOptions.getLength()){throw new Error(errorMessage);}\n_.each(attribute.chosenOptions(),function(id){attribute.chosen.push(attribute.options.findWhere({id:id}));});});},selectAllAttributes:function(attribute){this.chosenOptions(_.pluck(attribute.options(),'id'));},deSelectAllAttributes:function(attribute){attribute.chosenOptions.removeAll();},saveOptions:function(){var newOptions=[];_.each(this.attributes(),function(attribute){_.each(attribute.options(),function(element){var option=attribute.options.findWhere({id:element.id});if(option['is_new']===true){if(!attribute.isValidOption(option)){throw new Error($.mage.__('The value of attribute \"\"%1\"\" must be unique').replace('\"%1\"',attribute.label));}\nnewOptions.push(option);}});});if(!newOptions.length){return false;}\n$.ajax({type:'POST',url:this.createOptionsUrl,data:{options:newOptions},showLoader:true}).done(function(savedOptions){if(savedOptions.error){this.notificationMessage.error=savedOptions.error;this.notificationMessage.text=savedOptions.message;return;}\n_.each(this.attributes(),function(attribute){_.each(savedOptions,function(newOptionId,oldOptionId){var option=attribute.options.findWhere({id:oldOptionId});if(option){attribute.options.remove(option);option['is_new']=false;option.value=newOptionId;attribute.options.push(option);}});});}.bind(this));},requestAttributes:function(attributeIds){$.ajax({type:'GET',url:this.optionsUrl,data:{attributes:attributeIds},showLoader:true}).done(function(attributes){attributes=_.sortBy(attributes,function(attribute){return this.wizard.data.attributesIds.indexOf(attribute.id);}.bind(this));this.attributes(_.map(attributes,this.createAttribute));}.bind(this));},doInitSavedOptions:function(attribute){var selectedOptions,selectedOptionsIds,selectedAttribute=_.findWhere(this.initData.attributes,{id:attribute.id});if(selectedAttribute){selectedOptions=_.pluck(selectedAttribute.chosen,'value');selectedOptionsIds=_.pluck(_.filter(attribute.options(),function(option){return _.contains(selectedOptions,option.value);}),'id');attribute.chosenOptions(selectedOptionsIds);this.initData.attributes=_.without(this.initData.attributes,selectedAttribute);}\nreturn attribute;},render:function(wizard){this.wizard=wizard;this.requestAttributes(wizard.data.attributesIds());},force:function(wizard){this.saveOptions();this.saveAttribute(wizard);wizard.data.attributes=this.attributes;},back:function(wizard){wizard.data.attributesIds(this.attributes().pluck('id'));}});});","Magento_ConfigurableProduct/js/variations/steps/bulk.min.js":"define(['uiComponent','jquery','ko','underscore','Magento_Ui/js/lib/collapsible','mage/template','Magento_Ui/js/modal/alert','Magento_Catalog/js/product-gallery','jquery/file-uploader','mage/translate','Magento_ConfigurableProduct/js/variations/variations'],function(Component,$,ko,_,Collapsible,mageTemplate,alert){'use strict';return Component.extend({defaults:{modules:{variationsComponent:'${ $.variationsComponent }'},countVariations:0,attributes:[],sections:{},images:null,price:'',quantity:'',notificationMessage:{text:null,error:null}},initObservable:function(){this._super().observe('countVariations attributes sections');return this;},initialize:function(){var self=this;this._super();this.sections({images:{label:'images',type:ko.observable('none'),value:ko.observable(),attribute:ko.observable()},price:{label:'price',type:ko.observable('none'),value:ko.observable(),attribute:ko.observable(),currencySymbol:''},quantity:{label:'quantity',type:ko.observable('none'),value:ko.observable(),attribute:ko.observable()}});this.variationsComponent(function(variationsComponent){this.sections().price.currencySymbol=variationsComponent.getCurrencySymbol();}.bind(this));this.makeOptionSections=function(){return{images:new this.makeImages(null),price:this.price,quantity:this.quantity};}.bind(this);this.makeImages=function(images,typePreview){var preview;if(!images){this.images=[];this.preview=self.noImage;this.file=null;}else{this.images=images;preview=_.find(this.images,function(image){return _.contains(image.galleryTypes,typePreview);});if(preview){this.file=preview.file;this.preview=preview.url;}else{this.file=null;this.preview=self.noImage;}}};this.images=new this.makeImages();_.each(this.sections(),function(section){section.type.subscribe(function(){this.setWizardNotifyMessageDependOnSectionType();}.bind(this));},this);},types:['each','single','none'],setWizardNotifyMessageDependOnSectionType:function(){var flag=false;_.each(this.sections(),function(section){if(section.type()!=='none'){flag=true;}},this);if(flag){this.wizard.setNotificationMessage($.mage.__('Choose this option to delete and replace extension data for all past configurations.'));}else{this.wizard.cleanNotificationMessage();}},render:function(wizard){this.wizard=wizard;this.attributes(wizard.data.attributes());if(this.mode==='edit'){this.setWizardNotifyMessageDependOnSectionType();}\nthis.attributes.each(function(attribute){attribute.chosen.each(function(option){option.sections=ko.observable(this.makeOptionSections());},this);},this);_.each(this.sections(),function(section){section.attribute(null);});this.initCountVariations();this.bindGalleries();},initCountVariations:function(){var variations=this.generateVariation(this.attributes()),newVariations=_.map(variations,function(options){return this.variationsComponent().getVariationKey(options);}.bind(this)),existingVariations=_.keys(this.variationsComponent().productAttributesMap);this.countVariations(_.difference(newVariations,existingVariations).length);},generateVariation:function(attributes){return _.reduce(attributes,function(matrix,attribute){var tmp=[];_.each(matrix,function(variations){_.each(attribute.chosen,function(option){option['attribute_code']=attribute.code;option['attribute_label']=attribute.label;tmp.push(_.union(variations,[option]));});});if(!tmp.length){return _.map(attribute.chosen,function(option){option['attribute_code']=attribute.code;option['attribute_label']=attribute.label;return[option];});}\nreturn tmp;},[]);},getSectionValue:function(section,options){switch(this.sections()[section].type()){case'each':return _.find(this.sections()[section].attribute().chosen,function(chosen){return _.find(options,function(option){return chosen.id==option.id;});}).sections()[section];case'single':return this.sections()[section].value();case'none':return this[section];}},getImageProperty:function(node){var types=node.find('[data-role=gallery]').productGallery('option').types,images=_.map(node.find('[data-role=image]'),function(image){var imageData=$(image).data('imageData'),positionElement;imageData.galleryTypes=_.pluck(_.filter(types,function(type){return type.value===imageData.file;}),'code');positionElement=$(image).find('[name=\"product[media_gallery][images]['+imageData.file_id+'][position]\"]');if(!_.isEmpty(positionElement.val())){imageData.position=positionElement.val();}\nreturn imageData;});return _.reject(images,function(image){return!!image.isRemoved;});},fillImagesSection:function(){switch(this.sections().images.type()){case'each':if(this.sections().images.attribute()){this.sections().images.attribute().chosen.each(function(option){option.sections().images=new this.makeImages(this.getImageProperty($('[data-role=step-gallery-option-'+option.id+']')),'thumbnail');},this);}\nbreak;case'single':this.sections().images.value(new this.makeImages(this.getImageProperty($('[data-role=step-gallery-single]')),'thumbnail'));break;default:this.sections().images.value(new this.makeImages());break;}},force:function(wizard){this.fillImagesSection();this.validate();this.validateImage();wizard.data.sections=this.sections;wizard.data.sectionHelper=this.getSectionValue.bind(this);wizard.data.variations=this.generateVariation(this.attributes());},validate:function(){var formValid;_.each(this.sections(),function(section){switch(section.type()){case'each':if(!section.attribute()){throw new Error($.mage.__('Please select attribute for {section} section.').replace('{section}',section.label));}\nbreak;case'single':if(!section.value()){throw new Error($.mage.__('Please fill in the values for {section} section.').replace('{section}',section.label));}\nbreak;}},this);formValid=true;_.each($('[data-role=attributes-values-form]'),function(form){formValid=$(form).valid()&&formValid;});if(!formValid){throw new Error($.mage.__('Please fill-in correct values.'));}},validateImage:function(){switch(this.sections().images.type()){case'each':_.each(this.sections().images.attribute().chosen,function(option){if(!option.sections().images.images.length){throw new Error($.mage.__('Please select image(s) for your attribute.'));}});break;case'single':if(this.sections().images.value().file==null){throw new Error($.mage.__('Please choose image(s).'));}\nbreak;}},back:function(){this.setWizardNotifyMessageDependOnSectionType();},bindGalleries:function(){$('[data-role=bulk-step] [data-role=gallery]').each(function(index,element){var gallery=$(element),uploadInput=$(gallery.find('[name=image]')),dropZone=$(gallery).find('.image-placeholder');if(!gallery.data('gallery-initialized')){gallery.mage('productGallery',{template:'[data-template=gallery-content]',dialogTemplate:'.dialog-template',dialogContainerTmpl:'[data-role=img-dialog-container-tmpl]'});uploadInput.fileupload({dataType:'json',dropZone:dropZone,process:[{action:'load',fileTypes:/^image\\/(gif|jpeg|png)$/},{action:'resize',maxWidth:1920,maxHeight:1200},{action:'save'}],formData:{'form_key':FORM_KEY},sequentialUploads:true,acceptFileTypes:/(\\.|\\/)(gif|jpe?g|png)$/i,add:function(e,data){var progressTmpl=mageTemplate('[data-template=uploader]'),fileSize,tmpl;$.each(data.files,function(i,file){fileSize=typeof file.size=='undefined'?$.mage.__('We could not detect a size.'):byteConvert(file.size);data.fileId=Math.random().toString(33).substr(2,18);tmpl=progressTmpl({data:{name:file.name,size:fileSize,id:data.fileId}});$(tmpl).appendTo(gallery.find('[data-role=uploader]'));});$(this).fileupload('process',data).done(function(){data.submit();});},done:function(e,data){if(data.result&&!data.result.error){gallery.trigger('addItem',data.result);}else{$('#'+data.fileId).delay(2000).hide('highlight');alert({content:$.mage.__('We don\\'t recognize or support this file extension type.')});}\n$('#'+data.fileId).remove();},progress:function(e,data){var progress=parseInt(data.loaded / data.total*100,10),progressSelector='#'+data.fileId+' .progressbar-container .progressbar';$(progressSelector).css('width',progress+'%');},fail:function(e,data){var progressSelector='#'+data.fileId;$(progressSelector).removeClass('upload-progress').addClass('upload-failure').delay(2000).hide('highlight').remove();}});gallery.data('gallery-initialized',1);}});}});});","Magento_ConfigurableProduct/js/variations/steps/select_attributes.min.js":"define(['uiComponent','jquery','underscore','mage/translate'],function(Component,$,_){'use strict';var initNewAttributeListener=function(provider){$('[data-role=product-variations-matrix]').on('add',function(){provider().reload();});};return Component.extend({attributesLabels:{},stepInitialized:false,defaults:{modules:{multiselect:'${ $.multiselectName }',attributeProvider:'${ $.providerName }'},listens:{'${ $.multiselectName }:selected':'doSelectedAttributesLabels','${ $.multiselectName }:rows':'doSelectSavedAttributes'},notificationMessage:{text:null,error:null},selectedAttributes:[]},initialize:function(){this._super();this.selected=[];initNewAttributeListener(this.attributeProvider);},initObservable:function(){this._super().observe(['selectedAttributes']);return this;},render:function(wizard){this.wizard=wizard;this.setNotificationMessage();},setNotificationMessage:function(){var msg=$.mage.__('When you remove or add an attribute, we automatically update all configurations and you will need to recreate current configurations manually.');if(this.mode==='edit'){this.wizard.setNotificationMessage(msg);}},doSelectSavedAttributes:function(){if(this.stepInitialized===false){this.stepInitialized=true;_.each(this.initData.attributes,function(attribute){this.attributesLabels[attribute.id]=attribute.label;}.bind(this));this.multiselect().selected(_.pluck(this.initData.attributes,'id'));}},doSelectedAttributesLabels:function(selected){var labels=[];this.selected=selected;_.each(selected,function(attributeId){var attribute;if(!this.attributesLabels[attributeId]){attribute=_.findWhere(this.multiselect().rows(),{'attribute_id':attributeId});if(attribute){this.attributesLabels[attribute['attribute_id']]=attribute['frontend_label'];}}\nlabels.push(this.attributesLabels[attributeId]);}.bind(this));this.selectedAttributes(labels.join(', '));},force:function(wizard){wizard.data.attributesIds=this.multiselect().selected;if(!wizard.data.attributesIds()||wizard.data.attributesIds().length===0){throw new Error($.mage.__('Please select attribute(s).'));}\nthis.setNotificationMessage();},back:function(){}});});","Magento_ConfigurableProduct/js/variations/steps/summary.min.js":"define(['uiComponent','jquery','ko','underscore','Magento_Ui/js/grid/paging/paging','mage/translate'],function(Component,$,ko,_,paging){'use strict';return Component.extend({defaults:{modules:{variationsComponent:'${ $.variationsComponent }',modalComponent:'${ $.modalComponent }',matrixGridComponent:'${ $.matrixGridComponent }'},notificationMessage:{text:null,error:null},gridExisting:[],gridNew:[],gridDeleted:[],variationsExisting:[],variationsNew:[],variationsDeleted:[],pagingExisting:paging({name:'configurableWizard.pagingExisting',sizesConfig:{component:'Magento_ConfigurableProduct/js/variations/paging/sizes',name:'configurableWizard.pagingExisting_sizes'}}),pagingNew:paging({name:'configurableWizard.pagingNew',sizesConfig:{component:'Magento_ConfigurableProduct/js/variations/paging/sizes',name:'configurableWizard.pagingNew_sizes'}}),pagingDeleted:paging({name:'configurableWizard.pagingDeleted',sizesConfig:{component:'Magento_ConfigurableProduct/js/variations/paging/sizes',name:'configurableWizard.pagingDeleted_sizes'}}),attributes:[],attributesName:[$.mage.__('Images'),$.mage.__('SKU'),$.mage.__('Quantity'),$.mage.__('Price')],sections:[],gridTemplate:'Magento_ConfigurableProduct/variations/steps/summary-grid',quantityFieldName:'quantity'},initObservable:function(){var pagingObservables={currentNew:ko.getObservable(this.pagingNew,'current'),currentExisting:ko.getObservable(this.pagingExisting,'current'),currentDeleted:ko.getObservable(this.pagingDeleted,'current'),pageSizeNew:ko.getObservable(this.pagingNew,'pageSize'),pageSizeExisting:ko.getObservable(this.pagingExisting,'pageSize'),pageSizeDeleted:ko.getObservable(this.pagingDeleted,'pageSize')};this._super().observe('gridExisting gridNew gridDeleted attributes sections');this.gridExisting.columns=ko.observableArray();this.gridNew.columns=ko.observableArray();this.gridDeleted.columns=ko.observableArray();_.each(pagingObservables,function(observable){observable.subscribe(function(){this.generateGrid();},this);},this);return this;},nextLabelText:$.mage.__('Generate Products'),variations:[],calculate:function(variations,getSectionValue){var productSku=this.variationsComponent().getProductValue('sku'),productPrice=this.variationsComponent().getProductPrice(),productWeight=this.variationsComponent().getProductValue('weight'),productName=this.variationsComponent().getProductValue('name'),variationsKeys=[],gridExisting=[],gridNew=[],gridDeleted=[],matrixGridData=this.matrixGridComponent()?_.indexBy(this.matrixGridComponent().getUnionInsertData(),'variationKey'):{};this.variations=[];_.each(variations,function(options){var product,images,sku,name,quantity,price,variation,variationsKey=this.variationsComponent().getVariationKey(options),productDataFromGrid=matrixGridData[variationsKey]||{},productDataFromWizard={},productId=this.variationsComponent().getProductIdByOptions(options);if(productId){product=_.findWhere(this.variationsComponent().variations,{productId:productId});}\nimages=getSectionValue('images',options);sku=productSku+_.reduce(options,function(memo,option){return memo+'-'+option.label;},'');name=productName+_.reduce(options,function(memo,option){return memo+'-'+option.label;},'');quantity=getSectionValue(this.quantityFieldName,options);if(quantity){productDataFromWizard[this.quantityFieldName]=quantity;}\nprice=getSectionValue('price',options);if(price){productDataFromWizard.price=price;}\nif(productId&&!images.file){images=product.images;}\nproductDataFromGrid=_.pick(productDataFromGrid,'sku','name','weight','status','price','qty');if(productDataFromGrid.hasOwnProperty('qty')){productDataFromGrid[this.quantityFieldName]=productDataFromGrid.qty;}\ndelete productDataFromGrid.qty;product=_.pick(product||{},'sku','name','weight','status','price',this.quantityFieldName);variation={options:options,images:images,sku:sku,name:name,price:productPrice,productId:productId,weight:productWeight,editable:true};variation[this.quantityFieldName]=quantity;variation=_.extend(variation,product,productDataFromGrid,productDataFromWizard);if(productId){gridExisting.push(this.prepareRowForGrid(variation));}else{gridNew.push(this.prepareRowForGrid(variation));}\nthis.variations.push(variation);variationsKeys.push(variationsKey);},this);_.each(_.omit(this.variationsComponent().productAttributesMap,variationsKeys),function(productId){gridDeleted.push(this.prepareRowForGrid(_.findWhere(this.variationsComponent().variations,{productId:productId})));}.bind(this));this.variationsExisting=gridExisting;this.variationsNew=gridNew;this.variationsDeleted=gridDeleted;},generateGrid:function(){var pageExisting=this.pagingExisting.pageSize*this.pagingExisting.current,pageNew=this.pagingNew.pageSize*this.pagingNew.current,pageDeleted=this.pagingDeleted.pageSize*this.pagingDeleted.current;this.pagingExisting.totalRecords=this.variationsExisting.length;this.gridExisting(this.variationsExisting.slice(pageExisting-this.pagingExisting.pageSize,pageExisting));this.pagingNew.totalRecords=this.variationsNew.length;this.gridNew(this.variationsNew.slice(pageNew-this.pagingNew.pageSize,pageNew));this.pagingDeleted.totalRecords=this.variationsDeleted.length;this.gridDeleted(this.variationsDeleted.slice(pageDeleted-this.pagingDeleted.pageSize,pageDeleted));},prepareRowForGrid:function(variation){var row=[];row.push(_.extend({images:[]},variation.images));row.push(variation.sku);row.push(variation[this.quantityFieldName]);_.each(variation.options,function(option){row.push(option.label);});row.push(this.variationsComponent().getCurrencySymbol()+' '+variation.price);return row;},getGridTemplate:function(){return this.gridTemplate;},getGridId:function(){return _.uniqueId('grid_');},getColumnsName:function(attributes){var columns=this.attributesName.slice(0);attributes.each(function(attribute,index){columns.splice(3+index,0,attribute.label);},this);return columns;},render:function(wizard){this.wizard=wizard;this.sections(wizard.data.sections());this.attributes(wizard.data.attributes());this.gridNew([]);this.gridExisting([]);this.gridDeleted([]);this.gridExisting.columns(this.getColumnsName(this.wizard.data.attributes));this.gridNew.columns(this.getColumnsName(this.wizard.data.attributes));this.gridDeleted.columns(this.getColumnsName(this.variationsComponent().productAttributes));this.calculate(wizard.data.variations,wizard.data.sectionHelper);this.generateGrid();},force:function(){this.variationsComponent().render(this.variations,this.attributes());this.modalComponent().closeModal();},back:function(){}});});","Magento_Shipping/js/packages.min.js":"define(['jquery','Magento_Ui/js/modal/modal','mage/translate'],function($,modal,$t){'use strict';return function(config,element){config.buttons=[{text:$t('Print'),'class':'action action-primary',click:function(){window.location.href=this.options.url;}},{text:$t('Cancel'),'class':'action action-secondary',click:function(){this.closeModal();}}];modal(config,element);};});","Magento_Shipping/order/packaging.min.js":"define(['prototype'],function(){window.Packaging=Class.create();Packaging.prototype={initialize:function(params){this.packageIncrement=0;this.packages=[];this.itemsAll=[];this.createLabelUrl=params.createLabelUrl?params.createLabelUrl:null;this.itemsGridUrl=params.itemsGridUrl?params.itemsGridUrl:null;this.errorQtyOverLimit=params.errorQtyOverLimit;this.titleDisabledSaveBtn=params.titleDisabledSaveBtn;this.window=$('packaging_window');this.messages=this.window.select('.message-warning')[0];this.packagesContent=$('packages_content');this.template=$('package_template');this.paramsCreateLabelRequest={};this.validationErrorMsg=params.validationErrorMsg;this.defaultItemsQty=params.shipmentItemsQty?params.shipmentItemsQty:null;this.defaultItemsPrice=params.shipmentItemsPrice?params.shipmentItemsPrice:null;this.defaultItemsName=params.shipmentItemsName?params.shipmentItemsName:null;this.defaultItemsWeight=params.shipmentItemsWeight?params.shipmentItemsWeight:null;this.defaultItemsProductId=params.shipmentItemsProductId?params.shipmentItemsProductId:null;this.defaultItemsOrderItemId=params.shipmentItemsOrderItemId?params.shipmentItemsOrderItemId:null;this.shippingInformation=params.shippingInformation?params.shippingInformation:null;this.thisPage=params.thisPage?params.thisPage:null;this.customizableContainers=params.customizable?params.customizable:[];this.eps=0.000001;},getPackageId:function(packageBlock){return packageBlock.id.match(/\\d{0,}$/)[0];},setLabelCreatedCallback:function(callback){this.labelCreatedCallback=callback;},setCancelCallback:function(callback){this.cancelCallback=callback;},setConfirmPackagingCallback:function(callback){this.confirmPackagingCallback=callback;},setItemQtyCallback:function(callback){this.itemQtyCallback=callback;},setCreateLabelUrl:function(url){this.createLabelUrl=url;},setParamsCreateLabelRequest:function(params){Object.extend(this.paramsCreateLabelRequest,params);},showWindow:function(){if(this.packagesContent.childElements().length==0){this.newPackage();}\nconst allowedPackageTypes=[\"N\",\"D\"];if(!Object.values(this.customizableContainers).some(packageType=>allowedPackageTypes.includes(packageType))){$('packaging_window').select('th.col-length,th.col-width,th.col-height').forEach(element=>{element.classList.remove('_required')});}\njQuery(this.window).modal('openModal');},cancelPackaging:function(){if(Object.isFunction(this.cancelCallback)){this.cancelCallback();}},confirmPackaging:function(params){if(Object.isFunction(this.confirmPackagingCallback)){this.confirmPackagingCallback();}},checkAllItems:function(headCheckbox){$(headCheckbox).up('table').select('tbody input[type=\"checkbox\"]').each(function(checkbox){checkbox.checked=headCheckbox.checked;this._observeQty.call(checkbox);}.bind(this));},cleanPackages:function(){this.packagesContent.update();this.packages=[];this.itemsAll=[];this.packageIncrement=0;this._setAllItemsPackedState();this.messages.hide().update();},sendCreateLabelRequest:function(){var self=this;if(!this.validate()){this.messages.show().update(this.validationErrorMsg);return;}\nthis.messages.hide().update();if(this.createLabelUrl){var weight,length,width,height=null;var packagesParams=[];this.packagesContent.childElements().each(function(pack){var packageId=this.getPackageId(pack);weight=parseFloat(pack.select('input[name=\"container_weight\"]')[0].value);length=parseFloat(pack.select('input[name=\"container_length\"]')[0].value);width=parseFloat(pack.select('input[name=\"container_width\"]')[0].value);height=parseFloat(pack.select('input[name=\"container_height\"]')[0].value);packagesParams[packageId]={container:pack.select('select[name=\"package_container\"]')[0].value,customs_value:parseFloat(pack.select('input[name=\"package_customs_value\"]')[0].value,10),weight:isNaN(weight)?'':weight,length:isNaN(length)?'':length,width:isNaN(width)?'':width,height:isNaN(height)?'':height,weight_units:pack.select('select[name=\"container_weight_units\"]')[0].value,dimension_units:pack.select('select[name=\"container_dimension_units\"]')[0].value};if(isNaN(packagesParams[packageId]['customs_value'])){packagesParams[packageId]['customs_value']=0;}\nif('undefined'!=typeof pack.select('select[name=\"package_size\"]')[0]){if(''!=pack.select('select[name=\"package_size\"]')[0].value){packagesParams[packageId]['size']=pack.select('select[name=\"package_size\"]')[0].value;}}\nif('undefined'!=typeof pack.select('input[name=\"container_girth\"]')[0]){if(''!=pack.select('input[name=\"container_girth\"]')[0].value){packagesParams[packageId]['girth']=pack.select('input[name=\"container_girth\"]')[0].value;packagesParams[packageId]['girth_dimension_units']=pack.select('select[name=\"container_girth_dimension_units\"]')[0].value;}}\nif('undefined'!=typeof pack.select('select[name=\"content_type\"]')[0]&&'undefined'!=typeof pack.select('input[name=\"content_type_other\"]')[0]){packagesParams[packageId]['content_type']=pack.select('select[name=\"content_type\"]')[0].value;packagesParams[packageId]['content_type_other']=pack.select('input[name=\"content_type_other\"]')[0].value;}else{packagesParams[packageId]['content_type']='';packagesParams[packageId]['content_type_other']='';}\nvar deliveryConfirmation=pack.select('select[name=\"delivery_confirmation_types\"]');if(deliveryConfirmation.length){packagesParams[packageId]['delivery_confirmation']=deliveryConfirmation[0].value;}}.bind(this));for(var packageId in this.packages){if(!isNaN(packageId)){this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[container]']=packagesParams[packageId]['container'];this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[weight]']=packagesParams[packageId]['weight'];this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[customs_value]']=packagesParams[packageId]['customs_value'];this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[length]']=packagesParams[packageId]['length'];this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[width]']=packagesParams[packageId]['width'];this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[height]']=packagesParams[packageId]['height'];this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[weight_units]']=packagesParams[packageId]['weight_units'];this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[dimension_units]']=packagesParams[packageId]['dimension_units'];this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[content_type]']=packagesParams[packageId]['content_type'];this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[content_type_other]']=packagesParams[packageId]['content_type_other'];if('undefined'!=typeof packagesParams[packageId]['size']){this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[size]']=packagesParams[packageId]['size'];}\nif('undefined'!=typeof packagesParams[packageId]['girth']){this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[girth]']=packagesParams[packageId]['girth'];this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[girth_dimension_units]']=packagesParams[packageId]['girth_dimension_units'];}\nif('undefined'!=typeof packagesParams[packageId]['delivery_confirmation']){this.paramsCreateLabelRequest['packages['+packageId+']'+'[params]'+'[delivery_confirmation]']=packagesParams[packageId]['delivery_confirmation'];}\nfor(var packedItemId in this.packages[packageId]['items']){if(!isNaN(packedItemId)){this.paramsCreateLabelRequest['packages['+packageId+']'+'[items]'+'['+packedItemId+'][qty]']=this.packages[packageId]['items'][packedItemId]['qty'];this.paramsCreateLabelRequest['packages['+packageId+']'+'[items]'+'['+packedItemId+'][customs_value]']=this.packages[packageId]['items'][packedItemId]['customs_value'];this.paramsCreateLabelRequest['packages['+packageId+']'+'[items]'+'['+packedItemId+'][price]']=self.defaultItemsPrice[packedItemId];this.paramsCreateLabelRequest['packages['+packageId+']'+'[items]'+'['+packedItemId+'][name]']=self.defaultItemsName[packedItemId];this.paramsCreateLabelRequest['packages['+packageId+']'+'[items]'+'['+packedItemId+'][weight]']=self.defaultItemsWeight[packedItemId];this.paramsCreateLabelRequest['packages['+packageId+']'+'[items]'+'['+packedItemId+'][product_id]']=self.defaultItemsProductId[packedItemId];this.paramsCreateLabelRequest['packages['+packageId+']'+'[items]'+'['+packedItemId+'][order_item_id]']=self.defaultItemsOrderItemId[packedItemId];}}}}\nnew Ajax.Request(this.createLabelUrl,{parameters:this.paramsCreateLabelRequest,onSuccess:function(transport){var response=transport.responseText;if(response.isJSON()){response=response.evalJSON();if(response.error){this.messages.show().innerHTML=response.message;}else if(response.ok&&Object.isFunction(this.labelCreatedCallback)){this.labelCreatedCallback(response);}}}.bind(this)});if(this.paramsCreateLabelRequest['code']&&this.paramsCreateLabelRequest['carrier_title']&&this.paramsCreateLabelRequest['method_title']&&this.paramsCreateLabelRequest['price']){var a=this.paramsCreateLabelRequest['code'];var b=this.paramsCreateLabelRequest['carrier_title'];var c=this.paramsCreateLabelRequest['method_title'];var d=this.paramsCreateLabelRequest['price'];this.paramsCreateLabelRequest={};this.paramsCreateLabelRequest['code']=a;this.paramsCreateLabelRequest['carrier_title']=b;this.paramsCreateLabelRequest['method_title']=c;this.paramsCreateLabelRequest['price']=d;}else{this.paramsCreateLabelRequest={};}}},validate:function(){var dimensionElements=$('packaging_window').select('input[name=container_length],input[name=container_width],input[name=container_height],input[name=container_girth]:not(\"._disabled\")');var callback=null;if(dimensionElements.any(function(element){return!!element.value;})){callback=function(element){$(element).addClassName('required-entry');};}else{callback=function(element){$(element).removeClassName('required-entry');};}\ndimensionElements.each(callback);const allowedPackageTypes=[\"N\",\"D\"];if(Object.values(this.customizableContainers).some(packageType=>allowedPackageTypes.includes(packageType))){dimensionElements.each(function(element){$(element).addClassName('required-entry');});}\nreturn result=$$('[id^=\"package_block_\"]      input').collect(function(element){return this.validateElement(element);},this).all();},validateElement:function(elm){var cn=$w(elm.className);return result=cn.all(function(value){var v=Validation.get(value);if(Validation.isVisible(elm)&&!v.test($F(elm),elm)){$(elm).addClassName('validation-failed');return false;}\n$(elm).removeClassName('validation-failed');return true;});},validateCustomsValue:function(){var items=[];var isValid=true;var itemsPrepare=[];var itemsPacked=[];this.packagesContent.childElements().each(function(pack){itemsPrepare=pack.select('[data-role=\"package-items\"]')[0];if(itemsPrepare){items=items.concat(itemsPrepare.select('.grid tbody tr'));}\nitemsPacked=pack.select('.package_items')[0];if(itemsPacked){items=items.concat(itemsPacked.select('.grid tbody tr'));}});items.each(function(item){var itemCustomsValue=item.select('[name=\"customs_value\"]')[0];if(!this.validateElement(itemCustomsValue)){isValid=false;}}.bind(this));if(isValid){this.messages.hide().update();}else{this.messages.show().update(this.validationErrorMsg);}\nreturn isValid;},newPackage:function(){var pack=this.template.cloneNode(true);pack.id='package_block_'+ ++this.packageIncrement;pack.addClassName('package-block');pack.select('[data-role=package-number]')[0].update(this.packageIncrement);this.packagesContent.insert({top:pack});pack.select('[data-action=package-save-items]')[0].hide();pack.show();},deletePackage:function(obj){var pack=$(obj).up('[id^=\"package_block\"]');var packItems=pack.select('.package_items')[0];var packageId=this.getPackageId(pack);delete this.packages[packageId];pack.remove();this.messages.hide().update();this._setAllItemsPackedState();},deleteItem:function(obj){var item=$(obj).up('tr');var itemId=item.select('[type=\"checkbox\"]')[0].value;var pack=$(obj).up('[id^=\"package_block\"]');var packItems=pack.select('.package_items')[0];var packageId=this.getPackageId(pack);delete this.packages[packageId]['items'][itemId];if(item.offsetParent.rows.length<=2){$(packItems).hide();}\nitem.remove();this.messages.hide().update();this._recalcContainerWeightAndCustomsValue(packItems);this._setAllItemsPackedState();},recalcContainerWeightAndCustomsValue:function(obj){var pack=$(obj).up('[id^=\"package_block\"]');var packItems=pack.select('.package_items')[0];if(packItems){if(!this.validateCustomsValue()){return;}\nthis._recalcContainerWeightAndCustomsValue(packItems);}},getItemsForPack:function(obj){if(this.itemsGridUrl){var parameters=$H({'shipment_id':this.shipmentId});var packageBlock=$(obj).up('[id^=\"package_block\"]');var packagePrapare=packageBlock.select('[data-role=package-items]')[0];var packagePrapareGrid=packagePrapare.select('.grid_prepare')[0];new Ajax.Request(this.itemsGridUrl,{parameters:parameters,onSuccess:function(transport){var response=transport.responseText;if(response){packagePrapareGrid.update(response);this.processPackagePrepare(packagePrapareGrid);if(packagePrapareGrid.select('.grid tbody tr').length){packageBlock.select('[data-action=package-add-items]')[0].hide();packageBlock.select('[data-action=package-save-items]')[0].show();packagePrapare.show();}else{packagePrapareGrid.update();}}}.bind(this)});}},getPackedItemsQty:function(){var items=[];for(var packageId in this.packages){if(!isNaN(packageId)){for(var packedItemId in this.packages[packageId]['items']){if(!isNaN(packedItemId)){if(items[packedItemId]){items[packedItemId]+=this.packages[packageId]['items'][packedItemId]['qty'];}else{items[packedItemId]=this.packages[packageId]['items'][packedItemId]['qty'];}}}}}\nreturn items;},_parseQty:function(obj){var qty=$(obj).hasClassName('qty-decimal')?parseFloat(obj.value):parseInt(obj.value);if(isNaN(qty)||qty<=0){qty=1;}\nreturn qty;},packItems:function(obj){var anySelected=false;var packageBlock=$(obj).up('[id^=\"package_block\"]');var packageId=this.getPackageId(packageBlock);var packagePrepare=packageBlock.select('[data-role=package-items]')[0];var packagePrepareGrid=packagePrepare.select('.grid_prepare')[0];var checkExceedsQty=false;this.messages.hide().update();packagePrepareGrid.select('.grid tbody tr').each(function(item){var checkbox=item.select('[type=\"checkbox\"]')[0];var itemId=checkbox.value;var qtyValue=this._parseQty(item.select('[name=\"qty\"]')[0]);item.select('[name=\"qty\"]')[0].value=qtyValue;if(checkbox.checked&&this._checkExceedsQty(itemId,qtyValue)){this.messages.show().update(this.errorQtyOverLimit);checkExceedsQty=true;}}.bind(this));if(checkExceedsQty){return;}\nif(!this.validateCustomsValue()){return;}\npackagePrepareGrid.select('.grid tbody tr').each(function(item){var checkbox=item.select('[type=\"checkbox\"]')[0];if(checkbox.checked){var qty=item.select('[name=\"qty\"]')[0];var qtyValue=this._parseQty(qty);item.select('[name=\"qty\"]')[0].value=qtyValue;anySelected=true;qty.disabled='disabled';checkbox.disabled='disabled';packagePrepareGrid.select('.grid th [type=\"checkbox\"]')[0].up('th label').hide();item.select('[data-action=package-delete-item]')[0].show();}else{item.remove();}}.bind(this));if(anySelected){var packItems=packageBlock.select('.package_items')[0];if(!packItems){packagePrepare.insert(new Element('div').addClassName('grid_prepare'));packagePrepare.insert({after:packagePrepareGrid});packItems=packagePrepareGrid.removeClassName('grid_prepare').addClassName('package_items');packItems.select('.grid tbody tr').each(function(item){var itemId=item.select('[type=\"checkbox\"]')[0].value;var qtyValue=parseFloat(item.select('[name=\"qty\"]')[0].value);qtyValue=qtyValue<=0?1:qtyValue;if('undefined'==typeof this.packages[packageId]){this.packages[packageId]={'items':[],'params':{}};}\nif('undefined'==typeof this.packages[packageId]['items'][itemId]){this.packages[packageId]['items'][itemId]={};this.packages[packageId]['items'][itemId]['qty']=qtyValue;}else{this.packages[packageId]['items'][itemId]['qty']+=qtyValue;}}.bind(this));}else{packagePrepareGrid.select('.grid tbody tr').each(function(item){var itemId=item.select('[type=\"checkbox\"]')[0].value;var qtyValue=parseFloat(item.select('[name=\"qty\"]')[0].value);qtyValue=qtyValue<=0?1:qtyValue;if('undefined'==typeof this.packages[packageId]['items'][itemId]){this.packages[packageId]['items'][itemId]={};this.packages[packageId]['items'][itemId]['qty']=qtyValue;packItems.select('.grid tbody')[0].insert(item);}else{this.packages[packageId]['items'][itemId]['qty']+=qtyValue;var packItem=packItems.select('[type=\"checkbox\"][value=\"'+itemId+'\"]')[0].up('tr').select('[name=\"qty\"]')[0];packItem.value=this.packages[packageId]['items'][itemId]['qty'];}}.bind(this));packagePrepareGrid.update();}\n$(packItems).show();this._recalcContainerWeightAndCustomsValue(packItems);}else{packagePrepareGrid.update();}\npackagePrepare.hide();packageBlock.select('[data-action=package-save-items]')[0].hide();packageBlock.select('[data-action=package-add-items]')[0].show();this._setAllItemsPackedState();},validateItemQty:function(itemId,qty){return this.defaultItemsQty[itemId]<qty?this.defaultItemsQty[itemId]:qty;},changeMeasures:function(obj){var incr=0;var incrSelected=0;obj.childElements().each(function(option){if(option.selected){incrSelected=incr;}\nincr++;});var packageBlock=$(obj).up('[id^=\"package_block\"]');packageBlock.select('.measures').each(function(item){if(item.name!=obj.name){var incr=0;item.select('option').each(function(option){if(incr==incrSelected){item.value=option.value;}\nincr++;});}});},checkSizeAndGirthParameter:function(obj,enabled){if(enabled==0){return;}\nvar currentNode=obj;while(currentNode.nodeName!='TBODY'){currentNode=currentNode.parentNode;}\nif(!currentNode){return;}\nvar packageSize=currentNode.select('select[name=package_size]');var packageContainer=currentNode.select('select[name=package_container]');var packageGirth=currentNode.select('input[name=container_girth]');var packageGirthDimensionUnits=currentNode.select('select[name=container_girth_dimension_units]');if(packageSize.length<=0){return;}\nvar girthEnabled=packageContainer[0].value=='NONRECTANGULAR'||packageContainer[0].value=='VARIABLE';if(!girthEnabled){packageGirth[0].value='';packageGirth[0].disable();packageGirth[0].addClassName('_disabled');packageGirthDimensionUnits[0].disable();packageGirthDimensionUnits[0].addClassName('_disabled');}else{packageGirth[0].enable();packageGirth[0].removeClassName('_disabled');packageGirthDimensionUnits[0].enable();packageGirthDimensionUnits[0].removeClassName('_disabled');}\nvar sizeEnabled=packageContainer[0].value=='NONRECTANGULAR'||packageContainer[0].value=='RECTANGULAR'||packageContainer[0].value=='VARIABLE';if(!sizeEnabled){option=document.createElement('OPTION');option.value='';option.text='';packageSize[0].options.add(option);packageSize[0].value='';packageSize[0].disable();packageSize[0].addClassName('_disabled');}else{for(i=0;i<packageSize[0].length;i++){if(packageSize[0].options[i].value==''){packageSize[0].removeChild(packageSize[0].options[i]);}}\npackageSize[0].enable();packageSize[0].removeClassName('_disabled');}},changeContainerType:function(obj){if(this.customizableContainers.length<=0){return;}\nvar disable=true;for(var i in this.customizableContainers){if(this.customizableContainers[i]==obj.value){disable=false;break;}}\nvar currentNode=obj;while(currentNode.nodeName!='TBODY'){currentNode=currentNode.parentNode;}\nif(!currentNode){return;}\n$(currentNode).select('input[name=container_length],input[name=container_width],input[name=container_height],select[name=container_dimension_units]').each(function(inputElement){if(disable){Form.Element.disable(inputElement);inputElement.addClassName('_disabled');if(inputElement.nodeName=='INPUT'){$(inputElement).value='';}}else{Form.Element.enable(inputElement);inputElement.removeClassName('_disabled');}});},changeContentTypes:function(obj){var packageBlock=$(obj).up('[id^=\"package_block\"]');var contentType=packageBlock.select('[name=content_type]')[0];var contentTypeOther=packageBlock.select('[name=content_type_other]')[0];if(contentType.value=='OTHER'){Form.Element.enable(contentTypeOther);contentTypeOther.removeClassName('_disabled');}else{Form.Element.disable(contentTypeOther);contentTypeOther.addClassName('_disabled');}},_getItemsCount:function(items){var count=0;items.each(function(itemCount){if(!isNaN(itemCount)){count+=parseFloat(itemCount);}});return count;},_setAllItemsPackedState:function(){var addPackageBtn=$$('[data-action=add-packages]')[0];var savePackagesBtn=$$('[data-action=save-packages]')[0];if(this._getItemsCount(this.itemsAll)>0&&this._checkExceedsQtyFinal(this._getItemsCount(this.getPackedItemsQty()),this._getItemsCount(this.itemsAll))){this.packagesContent.select('[data-action=package-add-items]').each(function(button){button.disabled='disabled';button.addClassName('_disabled');});addPackageBtn.addClassName('_disabled');Form.Element.disable(addPackageBtn);savePackagesBtn.removeClassName('_disabled');Form.Element.enable(savePackagesBtn);savePackagesBtn.title='';var packagesRecalc=[];this.packagesContent.childElements().each(function(pack){if(!pack.select('.package_items .grid tbody tr').length){pack.remove();}});var packagesCount=this.packagesContent.childElements().length;this.packageIncrement=packagesCount;this.packagesContent.childElements().each(function(pack){var packageId=this.getPackageId(pack);pack.id='package_block_'+packagesCount;pack.select('[data-role=package-number]')[0].update(packagesCount);packagesRecalc[packagesCount]=this.packages[packageId];--packagesCount;}.bind(this));this.packages=packagesRecalc;}else{this.packagesContent.select('[data-action=package-add-items]').each(function(button){button.removeClassName('_disabled');Form.Element.enable(button);});addPackageBtn.removeClassName('_disabled');Form.Element.enable(addPackageBtn);savePackagesBtn.addClassName('_disabled');Form.Element.disable(savePackagesBtn);savePackagesBtn.title=this.titleDisabledSaveBtn;}},processPackagePrepare:function(packagePrepare){var itemsAll=[],qty,itemId,qtyValue=0,value=1;packagePrepare.select('.grid tbody tr').each(function(item){qty=item.select('[name=\"qty\"]')[0],itemId=item.select('[type=\"checkbox\"]')[0].value,qtyValue=parseFloat(qty.value);if(Object.isFunction(this.itemQtyCallback)){value=this.itemQtyCallback(itemId);if(typeof value!=='undefined'){qtyValue=parseFloat(value);qtyValue=this.validateItemQty(itemId,qtyValue);qty.value=qtyValue;}}else{value=item.select('[name=\"qty\"]')[0].value;qtyValue=typeof value=='string'&&value.length==0?0:parseFloat(value);if(isNaN(qtyValue)||qtyValue<0){qtyValue=1;}}\nif(qtyValue==0){item.remove();return;}\nvar packedItems=this.getPackedItemsQty();itemsAll[itemId]=qtyValue;for(var packedItemId in packedItems){if(!isNaN(packedItemId)){var packedQty=packedItems[packedItemId];if(itemId==packedItemId){if(qtyValue==packedQty||qtyValue<=packedQty){item.remove();}else if(qtyValue>packedQty){qty.value=Number(Number(Math.round(qtyValue-packedQty+'e+4')+'e-4').toFixed(4));}}}}}.bind(this));if(!this.itemsAll.length){this.itemsAll=itemsAll;}\npackagePrepare.select('tbody input[type=\"checkbox\"]').each(function(item){$(item).observe('change',this._observeQty);this._observeQty.call(item);}.bind(this));},_observeQty:function(){var tr=jQuery(this).closest('tr')[0],qty=$(tr.cells[tr.cells.length-1]).select('input[name=\"qty\"]')[0];if(qty.disabled=!this.checked){$(qty).addClassName('_disabled');}else{$(qty).removeClassName('_disabled');}},_checkExceedsQty:function(itemId,qty){var packedItemQty=this.getPackedItemsQty()[itemId]?this.getPackedItemsQty()[itemId]:0;var allItemQty=this.itemsAll[itemId];return qty*(1-this.eps)>allItemQty*(1+this.eps)-packedItemQty*(1-this.eps);},_checkExceedsQtyFinal:function(checkOne,defQty){return checkOne*(1+this.eps)>=defQty*(1-this.eps);},_recalcContainerWeightAndCustomsValue:function(container){var packageBlock=container.up('[id^=\"package_block\"]');var packageId=this.getPackageId(packageBlock);var containerWeight=packageBlock.select('[name=\"container_weight\"]')[0];var containerCustomsValue=packageBlock.select('[name=\"package_customs_value\"]')[0];containerWeight.value=0;containerCustomsValue.value=0;container.select('.grid tbody tr').each(function(item){var itemId=item.select('[type=\"checkbox\"]')[0].value;var qtyValue=parseFloat(item.select('[name=\"qty\"]')[0].value);if(isNaN(qtyValue)||qtyValue<=0){qtyValue=1;item.select('[name=\"qty\"]')[0].value=qtyValue;}\nvar itemWeight=parseFloat(this._getElementText(item.select('[data-role=item-weight]')[0]));containerWeight.value=parseFloat(containerWeight.value)+itemWeight*qtyValue;var itemCustomsValue=parseFloat(item.select('[name=\"customs_value\"]')[0].value)||0;containerCustomsValue.value=parseFloat(containerCustomsValue.value)+itemCustomsValue*qtyValue;this.packages[packageId]['items'][itemId]['customs_value']=itemCustomsValue;}.bind(this));containerWeight.value=parseFloat(parseFloat(Math.round(containerWeight.value+'e+4')+'e-4').toFixed(4));containerCustomsValue.value=parseFloat(Math.round(containerCustomsValue.value+'e+2')+'e-2').toFixed(2);if(containerCustomsValue.value==0){containerCustomsValue.value='';}},_getElementText:function(el){if('string'==typeof el.textContent){return el.textContent;}\nif('string'==typeof el.innerText){return el.innerText;}\nreturn el.innerHTML.replace(/<[^>]*>/g,'');}};});","Magento_Rule/conditions-data-normalizer.min.js":"define(['jquery','underscore'],function($,_){'use strict';var ConditionsDataNormalizer=function(){this.patterns={validate:/^[a-z0-9_.-][a-z0-9_.-]*(?:\\[(?:\\d*|[a-z0-9_.-]+)\\])*$/i,key:/[a-z0-9_.-]+|(?=\\[\\])/gi,push:/^$/,fixed:/^\\d+$/,named:/^[a-z0-9_.-]+$/i};};ConditionsDataNormalizer.prototype={normalize:function normalize(value){var el,_this=this;this.pushes={};this.data={};_.each(value,function(e,i){el={};el[i]=e;_this._addPair({name:i,value:e});});return this.data;},_build:function build(base,key,value){base[key]=value;return base;},_makeObject:function makeObject(root,value){var keys=root.match(this.patterns.key),k,idx;while((k=keys.pop())!==undefined){if(this.patterns.push.test(k)){idx=this._incrementPush(root.replace(/\\[\\]$/,''));value=this._build([],idx,value);}\nelse if(this.patterns.fixed.test(k)){value=this._build({},k,value);}\nelse if(this.patterns.named.test(k)){value=this._build({},k,value);}}\nreturn value;},_incrementPush:function incrementPush(key){if(this.pushes[key]===undefined){this.pushes[key]=0;}\nreturn this.pushes[key]++;},_addPair:function addPair(pair){var obj=this._makeObject(pair.name,pair.value);if(!this.patterns.validate.test(pair.name)){return this;}\nthis.data=$.extend(true,this.data,obj);return this;}};return ConditionsDataNormalizer;});","Magento_Rule/rules.min.js":"define(['jquery','Magento_Ui/js/modal/alert','mage/translate','prototype'],function(jQuery){'use strict';var VarienRulesForm=new Class.create();VarienRulesForm.prototype={initialize:function(parent,newChildUrl){this.parent=$(parent);this.newChildUrl=newChildUrl;this.shownElement=null;this.updateElement=null;this.chooserSelectedItems=$H({});this.readOnly=false;var elems=this.parent.getElementsByClassName('rule-param');for(var i=0;i<elems.length;i++){this.initParam(elems[i]);}},setReadonly:function(readonly){this.readOnly=readonly;var elems=this.parent.getElementsByClassName('rule-param-remove');for(var i=0;i<elems.length;i++){var element=elems[i];if(this.readOnly){element.hide();}else{element.show();}}\nvar elems=this.parent.getElementsByClassName('rule-param-new-child');for(var i=0;i<elems.length;i++){var element=elems[i];if(this.readOnly){element.hide();}else{element.show();}}\nvar elems=this.parent.getElementsByClassName('rule-param');for(var i=0;i<elems.length;i++){var container=elems[i];var label=Element.down(container,'.label');if(label){if(this.readOnly){label.addClassName('label-disabled');}else{label.removeClassName('label-disabled');}}}},initParam:function(container){container.rulesObject=this;var label=Element.down(container,'.label');if(label){Event.observe(label,'click',this.showParamInputField.bind(this,container));}\nvar elem=Element.down(container,'.element');if(elem){var trig=elem.down('.rule-chooser-trigger');if(trig){Event.observe(trig,'click',this.toggleChooser.bind(this,container));}\nvar apply=elem.down('.rule-param-apply');if(apply){Event.observe(apply,'click',this.hideParamInputField.bind(this,container));}else{elem=elem.down('.element-value-changer');elem.container=container;if(!elem.multiple){Event.observe(elem,'change',this.hideParamInputField.bind(this,container));this.changeVisibilityForValueRuleParam(elem);}\nEvent.observe(elem,'blur',this.hideParamInputField.bind(this,container));}}\nvar remove=Element.down(container,'.rule-param-remove');if(remove){Event.observe(remove,'click',this.removeRuleEntry.bind(this,container));}},showChooserElement:function(chooser){this.chooserSelectedItems=$H({});if(chooser.hasClassName('no-split')){this.chooserSelectedItems.set(this.updateElement.value,1);}else{var values=this.updateElement.value.split(','),s='';for(var i=0;i<values.length;i++){s=values[i].strip();if(s!=''){this.chooserSelectedItems.set(s,1);}}}\nnew Ajax.Request(chooser.getAttribute('url'),{evalScripts:true,parameters:{'form_key':FORM_KEY,'selected[]':this.chooserSelectedItems.keys()},onSuccess:function(transport){if(this._processSuccess(transport)){jQuery(chooser).html(transport.responseText);this.showChooserLoaded(chooser,transport);jQuery(chooser).trigger('contentUpdated');}}.bind(this),onFailure:this._processFailure.bind(this)});},showChooserLoaded:function(chooser,transport){chooser.style.display='block';},showChooser:function(container,event){var chooser=container.up('li');if(!chooser){return;}\nchooser=chooser.down('.rule-chooser');if(!chooser){return;}\nthis.showChooserElement(chooser);},hideChooser:function(container,event){var chooser=container.up('li');if(!chooser){return;}\nchooser=chooser.down('.rule-chooser');if(!chooser){return;}\nchooser.style.display='none';},toggleChooser:function(container,event){if(this.readOnly){return false;}\nvar chooser=container.up('li').down('.rule-chooser');if(!chooser){return;}\nif(chooser.style.display=='block'){chooser.style.display='none';this.cleanChooser(container,event);}else{this.showChooserElement(chooser);}},cleanChooser:function(container,event){var chooser=container.up('li').down('.rule-chooser');if(!chooser){return;}\nchooser.innerHTML='';},showParamInputField:function(container,event){if(this.readOnly){return false;}\nif(this.shownElement){this.hideParamInputField(this.shownElement,event);}\nElement.addClassName(container,'rule-param-edit');var elemContainer=Element.down(container,'.element');var elem=Element.down(elemContainer,'input.input-text');jQuery(elem).trigger('contentUpdated');if(elem){elem.focus();if(elem&&elem.id&&elem.id.match(/__value$/)){this.updateElement=elem;}}\nvar elem=Element.down(elemContainer,'.element-value-changer');if(elem){elem.focus();}\nthis.shownElement=container;},hideParamInputField:function(container,event){Element.removeClassName(container,'rule-param-edit');var label=Element.down(container,'.label'),elem;if(!container.hasClassName('rule-param-new-child')){elem=Element.down(container,'.element-value-changer');if(elem&&elem.options){var selectedOptions=[];for(var i=0;i<elem.options.length;i++){if(elem.options[i].selected){selectedOptions.push(elem.options[i].text);}}\nvar str=selectedOptions.join(', ');label.innerHTML=str!=''?str:'...';}\nthis.changeVisibilityForValueRuleParam(elem);elem=Element.down(container,'input.input-text');if(elem){var str=elem.value.replace(/(^\\s+|\\s+$)/g,'');elem.value=str;if(str==''){str='...';}else if(str.length>30){str=str.substr(0,30)+'...';}\nlabel.innerHTML=str.escapeHTML();}}else{elem=container.down('.element-value-changer');if(elem.value){this.addRuleNewChild(elem);}\nelem.value='';}\nif(elem&&elem.id&&elem.id.match(/__value$/)){this.hideChooser(container,event);this.updateElement=null;}\nthis.shownElement=null;},changeVisibilityForValueRuleParam:function(elem){var parsedElementId=elem.id.split('__');if(parsedElementId[2]!=='operator'){return false;}\nvar valueElement=jQuery('#'+parsedElementId[0]+'__'+parsedElementId[1]+'__value');if(elem.value==='<=>'){valueElement.closest('.rule-param').hide();}else{valueElement.closest('.rule-param').show();}\nreturn true;},addRuleNewChild:function(elem){var parent_id=elem.id.replace(/^.*__(.*)__.*$/,'$1');var children_ul_id=elem.id.replace(/__/g,':').replace(/[^:]*$/,'children').replace(/:/g,'__');var children_ul=$(this.parent).select('#'+children_ul_id)[0];var max_id=0,i;var children_inputs=Selector.findChildElements(children_ul,$A(['input.hidden']));if(children_inputs.length){children_inputs.each(function(el){if(el.id.match(/__type$/)){i=1*el.id.replace(/^.*__.*?([0-9]+)__.*$/,'$1');max_id=i>max_id?i:max_id;}});}\nvar new_id=parent_id+'--'+(max_id+1);var new_type=elem.value;var new_elem=document.createElement('LI');new_elem.className='rule-param-wait';new_elem.innerHTML=jQuery.mage.__('This won\\'t take long . . .');children_ul.insertBefore(new_elem,$(elem).up('li'));new Ajax.Request(this.newChildUrl,{evalScripts:true,parameters:{form_key:FORM_KEY,type:new_type.replace('/','-'),id:new_id},onComplete:this.onAddNewChildComplete.bind(this,new_elem),onSuccess:function(transport){if(this._processSuccess(transport)){$(new_elem).update(transport.responseText);}}.bind(this),onFailure:this._processFailure.bind(this)});},_processSuccess:function(transport){if(transport.responseText.isJSON()){var response=transport.responseText.evalJSON();if(response.error){alert(response.message);}\nif(response.ajaxExpired&&response.ajaxRedirect){setLocation(response.ajaxRedirect);}\nreturn false;}\nreturn true;},_processFailure:function(transport){location.href=BASE_URL;},onAddNewChildComplete:function(new_elem){if(this.readOnly){return false;}\n$(new_elem).removeClassName('rule-param-wait');var elems=new_elem.getElementsByClassName('rule-param');for(var i=0;i<elems.length;i++){this.initParam(elems[i]);}},removeRuleEntry:function(container,event){var li=Element.up(container,'li');li.parentNode.removeChild(li);},chooserGridInit:function(grid){},chooserGridRowInit:function(grid,row){if(!grid.reloadParams){grid.reloadParams={'selected[]':this.chooserSelectedItems.keys()};}},chooserGridRowClick:function(grid,event){var trElement=Event.findElement(event,'tr');var isInput=Event.element(event).tagName=='INPUT';if(trElement){var checkbox=Element.select(trElement,'input');if(checkbox[0]){var checked=isInput?checkbox[0].checked:!checkbox[0].checked;grid.setCheckboxChecked(checkbox[0],checked);}}},chooserGridCheckboxCheck:function(grid,element,checked){if(checked){if(!element.up('th')){this.chooserSelectedItems.set(element.value,1);}}else{this.chooserSelectedItems.unset(element.value);}\ngrid.reloadParams={'selected[]':this.chooserSelectedItems.keys()};this.updateElement.value=this.chooserSelectedItems.keys().join(', ');}};return VarienRulesForm;});","Magento_Vault/js/vault.min.js":"define(['jquery','uiComponent'],function($,Class){'use strict';return Class.extend({defaults:{$selector:null,selector:'edit_form',fieldset:'',active:false,imports:{onActiveChange:'active'}},initObservable:function(){var self=this,paymentSelector='[name=\"payment[method]\"][value=\"'+this.getCode()+'\"]:checked';self.$selector=$('#'+self.selector);this._super().observe(['active']);if(self.$selector.find(paymentSelector).length!==0){this.active(true);}\n$('#'+self.fieldset).find('[name=\"payment[token_switcher]\"]').on('click',this.rememberTokenSwitcher.bind(this));self.$selector.off('changePaymentMethod.'+this.getCode()).on('changePaymentMethod.'+this.getCode(),this.changePaymentMethod.bind(this));if(this.active()){this.chooseTokenSwitcher();}\nreturn this;},changePaymentMethod:function(event,method){this.active(method===this.getCode());return this;},rememberTokenSwitcher:function(event){$('#'+this.selector).data('lastTokenSwitcherId',event.target.id);return this;},chooseTokenSwitcher:function(){var lastTokenSwitcherId=$('#'+this.selector).data('lastTokenSwitcherId');if(lastTokenSwitcherId){$('#'+lastTokenSwitcherId).trigger('click');}else{$('#'+this.fieldset+' input:radio:first').trigger('click');}\nreturn this;},onActiveChange:function(isActive){if(!isActive){this.$selector.trigger('setVaultNotActive.'+this.getCode());return;}\nthis.chooseTokenSwitcher();window.order.addExcludedPaymentMethod(this.getCode());},getCode:function(){return this.code;}});});","Magento_AdvancedSearch/js/testconnection.min.js":"define(['jquery','Magento_Ui/js/modal/alert','jquery/ui'],function($,alert){'use strict';$.widget('mage.testConnection',{options:{url:'',elementId:'',successText:'',failedText:'',fieldMapping:''},_create:function(){this._on({'click':$.proxy(this._connect,this)});},_connect:function(){var result=this.options.failedText,element=$('#'+this.options.elementId),self=this,params={},msg='',fieldToCheck=this.options.fieldToCheck||'success';element.removeClass('success').addClass('fail');$.each(JSON.parse(this.options.fieldMapping),function(key,el){params[key]=$('#'+el).val();});$.ajax({url:this.options.url,showLoader:true,data:params,headers:this.options.headers||{}}).done(function(response){if(response[fieldToCheck]){element.removeClass('fail').addClass('success');result=self.options.successText;}else{msg=response.errorMessage;if(msg){alert({content:msg});}}}).always(function(){$('#'+self.options.elementId+'_result').text(result);});}});return $.mage.testConnection;});","Magento_AdobeIms/js/config.min.js":"define([],function(){'use strict';return{loginUrl:'https://ims-na1.adobelogin.com/ims/authorize',profileUrl:'adobe_ims/user/profile',logoutUrl:'adobe_ims/user/logout',manageAccountLink:'https://account.adobe.com/',login:{callbackParsingParams:{regexpPattern:/auth\\[code=(success|error);message=(.+)\\]/,codeIndex:1,messageIndex:2,nameIndex:3,successCode:'success',errorCode:'error'},popupWindowParams:{width:500,height:600,top:100,left:300},popupWindowTimeout:10000}};});","Magento_AdobeIms/js/signIn.min.js":"define(['uiComponent','jquery','Magento_AdobeIms/js/action/authorization'],function(Component,$,login){'use strict';return Component.extend({defaults:{profileUrl:'adobe_ims/user/profile',logoutUrl:'adobe_ims/user/logout',user:{isAuthorized:false,name:'',email:'',image:''},loginConfig:{url:'https://ims-na1.adobelogin.com/ims/authorize',callbackParsingParams:{regexpPattern:/auth\\[code=(success|error);message=(.+)\\]/,codeIndex:1,messageIndex:2,nameIndex:3,successCode:'success',errorCode:'error'},popupWindowParams:{width:500,height:600,top:100,left:300},popupWindowTimeout:60000}},initObservable:function(){this._super().observe(['user']);return this;},login:function(){var deferred=$.Deferred();if(this.user().isAuthorized){deferred.resolve();}\nlogin(this.loginConfig).then(function(response){this.loadUserProfile();deferred.resolve(response);}.bind(this)).fail(function(error){deferred.reject(error);});return deferred.promise();},loadUserProfile:function(){$.ajax({type:'GET',url:this.profileUrl,showLoader:true,dataType:'json',context:this,success:function(response){this.user({isAuthorized:true,name:response.result.name,email:response.result.email,image:response.result.image});},error:function(response){return response.message;}});},logout:function(){$.ajax({type:'POST',url:this.logoutUrl,data:{'form_key':window.FORM_KEY},dataType:'json',context:this,showLoader:true,success:function(){this.user({isAuthorized:false,name:'',email:'',image:''});}.bind(this),error:function(response){return response.message;}});}});});","Magento_AdobeIms/js/user.min.js":"define(['ko'],function(ko){'use strict';return{isAuthorized:ko.observable(false),name:ko.observable(''),email:ko.observable('')};});","Magento_AdobeIms/js/action/authorization.min.js":"define(['jquery'],function($){'use strict';function buildWindowParams(windowParams){var output='',coma='',paramName,paramValue;for(paramName in windowParams){if(windowParams[paramName]){paramValue=windowParams[paramName];output+=coma+paramName+'='+paramValue;coma=',';}}\nreturn output;}\nreturn function(config){var authWindow,deferred=$.Deferred(),watcherId,stopWatcherId;if(window.adobeIMSAuthWindow){window.adobeIMSAuthWindow.close();}\nauthWindow=window.adobeIMSAuthWindow=window.open(config.url,'authorization_widnow',buildWindowParams(config.popupWindowParams||{width:500,height:300}));function stopHandle(){clearTimeout(stopWatcherId);clearInterval(watcherId);authWindow.close();}\nfunction startHandle(){var responseData;try{if(authWindow.document.domain!==document.domain||authWindow.document.readyState!=='complete'){return;}\nstopWatcherId=setTimeout(function(){stopHandle();deferred.reject(new Error('Time\\'s up.'));},config.popupWindowTimeout||60000);responseData=authWindow.document.body.innerHTML.match(config.callbackParsingParams.regexpPattern);if(!responseData){return;}\nstopHandle();if(responseData[config.callbackParsingParams.codeIndex]===config.callbackParsingParams.successCode){deferred.resolve({isAuthorized:true,lastAuthSuccessMessage:responseData[config.callbackParsingParams.messageIndex]});}else{deferred.reject(responseData[config.callbackParsingParams.messageIndex]);}}catch(e){if(authWindow.closed){clearTimeout(stopWatcherId);clearInterval(watcherId);if(window.adobeIMSAuthWindow&&window.adobeIMSAuthWindow.closed){deferred.reject(new Error('Authentication window was closed.'));}}}}\nwatcherId=setInterval(startHandle,1000);return deferred.promise();};});"}
}});
